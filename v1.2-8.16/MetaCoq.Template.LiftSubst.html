<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Library MetaCoq.Template.LiftSubst</h1>

<div class="code">
<span class="comment">(*&nbsp;Distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;MIT&nbsp;license.&nbsp;*)</span><br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaCoq.Utils.utils.html#"><span class="id" title="library">utils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Common</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaCoq.Common.Environment.html#"><span class="id" title="library">Environment</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Template</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaCoq.Template.Ast.html#"><span class="id" title="library">Ast</span></a> <a class="idref" href="MetaCoq.Template.AstUtils.html#"><span class="id" title="library">AstUtils</span></a> <a class="idref" href="MetaCoq.Template.Induction.html#"><span class="id" title="library">Induction</span></a> <a class="idref" href="MetaCoq.Template.WfAst.html#"><span class="id" title="library">WfAst</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.ssr.ssreflect.html#"><span class="id" title="library">ssreflect</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Equations</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab99"></a><h1 class="section">Lifting and substitution for the AST</h1>


<div class="paragraph"> </div>

  Along with standard commutation lemmas.
  Definition of <span class="inlinecode"><span class="id" title="var">closedn</span></span> (boolean) predicate for checking if
  a term is closed. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="up" class="idref" href="#up"><span class="id" title="definition">up</span></a> := <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> 1 0.<br/>

<br/>
<span class="id" title="keyword">Create HintDb</span> <span class="id" title="var">terms</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">arith_congr</span> := <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; <span class="id" title="tactic">progress</span> <span class="id" title="tactic">f_equal</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">easy0</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">use_hyp</span> <span class="id" title="var">H</span> :=<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">H</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span> || <span class="id" title="var">destruct_hyp</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.Utils.utils.html#8426aced733de3f9c0ab331518367c06"><span class="id" title="notation">×</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span> || <span class="id" title="var">destruct_hyp</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">try</span> (<span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> ])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">do_intro</span> := (<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>; <span class="id" title="var">use_hyp</span> <span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">destruct_hyp</span> <span class="id" title="var">H</span> := (<span class="id" title="tactic">case</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">do_intro</span>; <span class="id" title="var">do_intro</span>)<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">use_hyps</span> :=<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span>:<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span> || (<span class="id" title="var">destruct_hyp</span> <span class="id" title="var">H</span>; <span class="id" title="var">use_hyps</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span>:<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span> || (<span class="id" title="var">destruct_hyp</span> <span class="id" title="var">H</span>; <span class="id" title="var">use_hyps</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">H</span>:<span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">do_atom</span> := (<span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">trivial</span> <span class="id" title="keyword">with</span> <span class="id" title="var">eq_true</span> | <span class="id" title="tactic">reflexivity</span> | <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">trivial</span> | <span class="id" title="var">contradiction</span> | <span class="id" title="tactic">congruence</span>]) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">rec</span> <span class="id" title="var">do_ccl</span> := (<span class="id" title="tactic">try</span> <span class="id" title="var">do_atom</span>; <span class="id" title="tactic">repeat</span> (<span class="id" title="var">do_intro</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">do_atom</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">arith_congr</span>; (<span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">split</span>; <span class="id" title="var">do_ccl</span> ])) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;(<span class="id" title="tactic">solve</span> [ <span class="id" title="var">do_atom</span> | <span class="id" title="var">use_hyps</span>; <span class="id" title="var">do_ccl</span> ]) || <span class="id" title="tactic">fail</span> "Cannot solve this goal".<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 10 (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">nat</span> ⇒ <span class="id" title="var">lia</span> : <span class="id" title="var">terms</span>.<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 10 (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">nat</span> ⇒ <span class="id" title="var">lia</span> : <span class="id" title="var">terms</span>.<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 10 (@<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ⇒ <span class="id" title="var">lia</span> : <span class="id" title="var">terms</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">easy</span> ::= <span class="id" title="var">easy0</span> || <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span> 3 <span class="id" title="keyword">with</span> <span class="id" title="var">core</span> <span class="id" title="var">terms</span>].<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="subst_rec" class="idref" href="#subst_rec"><span class="id" title="abbreviation">subst_rec</span></a> <span class="id" title="var">N</span> <span class="id" title="var">M</span> <span class="id" title="var">k</span> := (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <span class="id" title="var">N</span> <span class="id" title="var">k</span> <span class="id" title="var">M</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>).<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#"><span class="id" title="library">PeanoNat</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat"><span class="id" title="module">Nat</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_rel_ge" class="idref" href="#lift_rel_ge"><span class="id" title="lemma">lift_rel_ge</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="k:1" class="idref" href="#k:1"><span class="id" title="binder">k</span></a> <a id="n:2" class="idref" href="#n:2"><span class="id" title="binder">n</span></a> <a id="p:3" class="idref" href="#p:3"><span class="id" title="binder">p</span></a>, <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:3"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:2"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:1"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:3"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:2"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#k:1"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:2"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> |- ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">leb_spec</span></a> <span class="id" title="var">p</span> <span class="id" title="var">n</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_rel_lt" class="idref" href="#lift_rel_lt"><span class="id" title="lemma">lift_rel_lt</span></a> : <span class="id" title="keyword">∀</span> <a id="k:4" class="idref" href="#k:4"><span class="id" title="binder">k</span></a> <a id="n:5" class="idref" href="#n:5"><span class="id" title="binder">n</span></a> <a id="p:6" class="idref" href="#p:6"><span class="id" title="binder">p</span></a>, <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:6"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:5"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:4"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:6"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:5"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:5"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> |- ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">leb_spec</span></a> <span class="id" title="var">p</span> <span class="id" title="var">n</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_rel_lt" class="idref" href="#subst_rel_lt"><span class="id" title="lemma">subst_rel_lt</span></a> : <span class="id" title="keyword">∀</span> <a id="u:7" class="idref" href="#u:7"><span class="id" title="binder">u</span></a> <a id="n:8" class="idref" href="#n:8"><span class="id" title="binder">n</span></a> <a id="k:9" class="idref" href="#k:9"><span class="id" title="binder">k</span></a>, <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:9"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:8"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#u:7"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:9"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:8"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:8"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> |- *; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">leb_spec</span></a> <span class="id" title="var">k</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">intro</span> <span class="id" title="var">Hcomp</span>; <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_rel_gt" class="idref" href="#subst_rel_gt"><span class="id" title="lemma">subst_rel_gt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="u:10" class="idref" href="#u:10"><span class="id" title="binder">u</span></a> <a id="n:11" class="idref" href="#n:11"><span class="id" title="binder">n</span></a> <a id="k:12" class="idref" href="#k:12"><span class="id" title="binder">k</span></a>, <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:11"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:12"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#u:10"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#u:10"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:12"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:11"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#n:11"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#u:10"><span class="id" title="variable">u</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> |- *; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">leb_spec</span></a> <span class="id" title="var">k</span> <span class="id" title="var">n</span>). <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">u</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#nth_error_Some"><span class="id" title="lemma">nth_error_Some</span></a>; <span class="id" title="tactic">congruence</span>). <span class="id" title="var">lia</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_rel_eq" class="idref" href="#subst_rel_eq"><span class="id" title="lemma">subst_rel_eq</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="u:13" class="idref" href="#u:13"><span class="id" title="binder">u</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) <a id="n:14" class="idref" href="#n:14"><span class="id" title="binder">n</span></a> <a id="i:15" class="idref" href="#i:15"><span class="id" title="binder">i</span></a> <a id="t:16" class="idref" href="#t:16"><span class="id" title="binder">t</span></a> <a id="p:17" class="idref" href="#p:17"><span class="id" title="binder">p</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#nth_error"><span class="id" title="definition">List.nth_error</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#u:13"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#i:15"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:16"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:17"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:14"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#i:15"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#u:13"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:14"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:17"><span class="id" title="variable">p</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:14"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:16"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> |- ×. <span class="id" title="tactic">subst</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">leb_spec</span></a> <span class="id" title="var">n</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">i</span>)). <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift0_id" class="idref" href="#lift0_id"><span class="id" title="lemma">lift0_id</span></a> : <span class="id" title="keyword">∀</span> <a id="M:18" class="idref" href="#M:18"><span class="id" title="binder">M</span></a> <a id="k:19" class="idref" href="#k:19"><span class="id" title="binder">k</span></a>, <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> 0 <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:19"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:18"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:18"><span class="id" title="variable">M</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">M</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.Induction.html#term_forall_list_ind"><span class="id" title="lemma">term_forall_list_ind</span></a>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> |- *; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> ; <span class="id" title="var">easy</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">solve_all</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb"><span class="id" title="definition">leb</span></a> <span class="id" title="var">k</span> <span class="id" title="var">n</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift0_p" class="idref" href="#lift0_p"><span class="id" title="lemma">lift0_p</span></a> : <span class="id" title="keyword">∀</span> <a id="M:20" class="idref" href="#M:20"><span class="id" title="binder">M</span></a>, <a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> 0 <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:20"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:20"><span class="id" title="variable">M</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <span class="id" title="tactic">in</span> |- ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#lift0_id"><span class="id" title="lemma">lift0_id</span></a>; <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="simpl_lift" class="idref" href="#simpl_lift"><span class="id" title="lemma">simpl_lift</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="M:21" class="idref" href="#M:21"><span class="id" title="binder">M</span></a> <a id="n:22" class="idref" href="#n:22"><span class="id" title="binder">n</span></a> <a id="k:23" class="idref" href="#k:23"><span class="id" title="binder">k</span></a> <a id="p:24" class="idref" href="#p:24"><span class="id" title="binder">p</span></a> <a id="i:25" class="idref" href="#i:25"><span class="id" title="binder">i</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.LiftSubst.html#i:25"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:23"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:22"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.LiftSubst.html#k:23"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#i:25"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:24"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#i:25"><span class="id" title="variable">i</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:22"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:23"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:21"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#p:24"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:22"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:23"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:21"><span class="id" title="variable">M</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">M</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.Induction.html#term_forall_list_ind"><span class="id" title="lemma">term_forall_list_ind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>, ?<a class="idref" href="MetaCoq.Utils.MCProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a>, ?<a class="idref" href="MetaCoq.Common.BasicAst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaCoq.Template.Ast.html#map_predicate_map_predicate"><span class="id" title="lemma">map_predicate_map_predicate</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">rewrite</span> → <span class="id" title="var">H</span>, ?<span class="id" title="var">H0</span>, ?<span class="id" title="var">H1</span>; <span class="id" title="tactic">auto</span>); <span class="id" title="tactic">try</span> (<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">solve_all</span>).<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">leb_spec</span></a> <span class="id" title="var">k</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">leb_spec</span></a> <span class="id" title="var">i</span> (<span class="id" title="var">n0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">n</span>)); <span class="id" title="tactic">intros</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">leb_spec</span></a> <span class="id" title="var">i</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="simpl_lift0" class="idref" href="#simpl_lift0"><span class="id" title="lemma">simpl_lift0</span></a> : <span class="id" title="keyword">∀</span> <a id="M:26" class="idref" href="#M:26"><span class="id" title="binder">M</span></a> <a id="n:27" class="idref" href="#n:27"><span class="id" title="binder">n</span></a>, <a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:27"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:26"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> 1 (<a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:27"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:26"><span class="id" title="variable">M</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#simpl_lift"><span class="id" title="lemma">simpl_lift</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_branches_k_map_branches_k" class="idref" href="#map_branches_k_map_branches_k"><span class="id" title="lemma">map_branches_k_map_branches_k</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<a id="term:28" class="idref" href="#term:28"><span class="id" title="binder">term</span></a> <a id="term':29" class="idref" href="#term':29"><span class="id" title="binder">term'</span></a> <a id="term'':30" class="idref" href="#term'':30"><span class="id" title="binder">term''</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:31" class="idref" href="#f:31"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#term':29"><span class="id" title="variable">term'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#term'':30"><span class="id" title="variable">term''</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="g:32" class="idref" href="#g:32"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaCoq.Template.Ast.html#branch"><span class="id" title="record">branch</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#term:28"><span class="id" title="variable">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#term:28"><span class="id" title="variable">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#term':29"><span class="id" title="variable">term'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f':33" class="idref" href="#f':33"><span class="id" title="binder">f'</span></a> : <a class="idref" href="MetaCoq.Template.LiftSubst.html#term:28"><span class="id" title="variable">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#term':29"><span class="id" title="variable">term'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="l:34" class="idref" href="#l:34"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#branch"><span class="id" title="record">branch</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#term:28"><span class="id" title="variable">term</span></a>)) <a id="k:35" class="idref" href="#k:35"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="b:36" class="idref" href="#b:36"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="MetaCoq.Template.Ast.html#map_branch"><span class="id" title="definition">map_branch</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#f:31"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaCoq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#map_branch"><span class="id" title="definition">map_branch</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#g:32"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#b:36"><span class="id" title="variable">b</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#b:36"><span class="id" title="variable">b</span></a>)<a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:35"><span class="id" title="variable">k</span></a>)) (<a class="idref" href="MetaCoq.Template.Ast.html#map_branch"><span class="id" title="definition">map_branch</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#f':33"><span class="id" title="variable">f'</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#b:36"><span class="id" title="variable">b</span></a>)) <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:34"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="b:37" class="idref" href="#b:37"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="MetaCoq.Template.Ast.html#map_branch"><span class="id" title="definition">map_branch</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#f:31"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaCoq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#b:37"><span class="id" title="variable">b</span></a><a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:35"><span class="id" title="variable">k</span></a>)) (<a class="idref" href="MetaCoq.Template.Ast.html#map_branch"><span class="id" title="definition">map_branch</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#f':33"><span class="id" title="variable">f'</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#b:37"><span class="id" title="variable">b</span></a>)) <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:34"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.Utils.MCList.html#map_ext"><span class="id" title="lemma">map_ext</span></a> ⇒ <span class="id" title="var">b</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.Ast.html#map_branch_map_branch"><span class="id" title="lemma">map_branch_map_branch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.Ast.html#map_branch_eq_spec"><span class="id" title="lemma">map_branch_eq_spec</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="permute_lift" class="idref" href="#permute_lift"><span class="id" title="lemma">permute_lift</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="M:38" class="idref" href="#M:38"><span class="id" title="binder">M</span></a> <a id="n:39" class="idref" href="#n:39"><span class="id" title="binder">n</span></a> <a id="k:40" class="idref" href="#k:40"><span class="id" title="binder">k</span></a> <a id="p:41" class="idref" href="#p:41"><span class="id" title="binder">p</span></a> <a id="i:42" class="idref" href="#i:42"><span class="id" title="binder">i</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.LiftSubst.html#i:42"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:40"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:41"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#i:42"><span class="id" title="variable">i</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:39"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:40"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:38"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:39"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#k:40"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:41"><span class="id" title="variable">p</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:41"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#i:42"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:38"><span class="id" title="variable">M</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">M</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.Induction.html#term_forall_list_ind"><span class="id" title="lemma">term_forall_list_ind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>, ?<a class="idref" href="MetaCoq.Utils.MCProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a>, ?<a class="idref" href="MetaCoq.Common.BasicAst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>, ?<a class="idref" href="MetaCoq.Template.Ast.html#map_predicate_map_predicate"><span class="id" title="lemma">map_predicate_map_predicate</span></a>, ?<a class="idref" href="MetaCoq.Template.Ast.html#map_branches_map_branches"><span class="id" title="lemma">map_branches_map_branches</span></a>; <span class="id" title="tactic">f_equal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">auto</span>; <span class="id" title="var">solve_all</span>]; <span class="id" title="tactic">repeat</span> <span class="id" title="var">nth_leb_simpl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="permute_lift0" class="idref" href="#permute_lift0"><span class="id" title="lemma">permute_lift0</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="M:43" class="idref" href="#M:43"><span class="id" title="binder">M</span></a> <a id="k:44" class="idref" href="#k:44"><span class="id" title="binder">k</span></a>, <a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> 1 (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> 1 <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:44"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:43"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> 1 (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:44"><span class="id" title="variable">k</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> 1 <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:43"><span class="id" title="variable">M</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> 1 0 (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> 1 <span class="id" title="var">k</span> <span class="id" title="var">M</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> 1 (1 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">k</span>) (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> 1 0 <span class="id" title="var">M</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> |- ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#permute_lift"><span class="id" title="lemma">permute_lift</span></a>; <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_non_nil" class="idref" href="#map_non_nil"><span class="id" title="lemma">map_non_nil</span></a> {<a id="A:45" class="idref" href="#A:45"><span class="id" title="binder">A</span></a> <a id="B:46" class="idref" href="#B:46"><span class="id" title="binder">B</span></a>} (<a id="f:47" class="idref" href="#f:47"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaCoq.Template.LiftSubst.html#A:45"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#B:46"><span class="id" title="variable">B</span></a>) <a id="l:48" class="idref" href="#l:48"><span class="id" title="binder">l</span></a> : <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:48"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#f:47"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:48"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isLambda_lift" class="idref" href="#isLambda_lift"><span class="id" title="lemma">isLambda_lift</span></a> <a id="n:49" class="idref" href="#n:49"><span class="id" title="binder">n</span></a> <a id="k:50" class="idref" href="#k:50"><span class="id" title="binder">k</span></a> (<a id="bod:51" class="idref" href="#bod:51"><span class="id" title="binder">bod</span></a> : <a class="idref" href="MetaCoq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#bod:51"><span class="id" title="variable">bod</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:49"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:50"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#bod:51"><span class="id" title="variable">bod</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">bod</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">lift_isApp</span> <span class="id" title="var">map_non_nil</span> <span class="id" title="var">isLambda_lift</span> : <span class="id" title="var">all</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mkApps_tApp" class="idref" href="#mkApps_tApp"><span class="id" title="lemma">mkApps_tApp</span></a> <a id="t:52" class="idref" href="#t:52"><span class="id" title="binder">t</span></a> <a id="l:53" class="idref" href="#l:53"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#isApp"><span class="id" title="definition">isApp</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:52"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:53"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:52"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:53"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:52"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:53"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="simpl_subst_rec" class="idref" href="#simpl_subst_rec"><span class="id" title="lemma">simpl_subst_rec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="7674e0ce7f4ec5e4ff169924724c4b41" class="idref" href="#7674e0ce7f4ec5e4ff169924724c4b41"><span class="id" title="binder">Σ</span></a> <a id="M:55" class="idref" href="#M:55"><span class="id" title="binder">M</span></a> (<a id="H:56" class="idref" href="#H:56"><span class="id" title="binder">H</span></a> : <a class="idref" href="MetaCoq.Template.WfAst.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#7674e0ce7f4ec5e4ff169924724c4b41"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:55"><span class="id" title="variable">M</span></a>) <a id="N:57" class="idref" href="#N:57"><span class="id" title="binder">N</span></a> <a id="n:58" class="idref" href="#n:58"><span class="id" title="binder">n</span></a> <a id="p:59" class="idref" href="#p:59"><span class="id" title="binder">p</span></a> <a id="k:60" class="idref" href="#k:60"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.LiftSubst.html#p:59"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:58"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:60"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.LiftSubst.html#k:60"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:59"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:57"><span class="id" title="variable">N</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:59"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:57"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:58"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:60"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:55"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:58"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:60"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:55"><span class="id" title="variable">M</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Σ</span> <span class="id" title="var">M</span> <span class="id" title="var">wfM</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">wfM</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.WfAst.html#term_wf_forall_list_ind"><span class="id" title="lemma">term_wf_forall_list_ind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>, ?<a class="idref" href="MetaCoq.Utils.MCProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a>, ?<a class="idref" href="MetaCoq.Common.BasicAst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<a class="idref" href="MetaCoq.Template.Ast.html#map_predicate_map_predicate"><span class="id" title="lemma">map_predicate_map_predicate</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">solve_all</span>]; <span class="id" title="tactic">repeat</span> <span class="id" title="var">nth_leb_simpl</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHwfM</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaCoq.Template.WfAst.html#lift_isApp"><span class="id" title="lemma">lift_isApp</span></a> <span class="id" title="var">n</span> <span class="id" title="var">k</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#mkApps_tApp"><span class="id" title="lemma">mkApps_tApp</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#map_non_nil"><span class="id" title="lemma">map_non_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="simpl_subst" class="idref" href="#simpl_subst"><span class="id" title="lemma">simpl_subst</span></a> <a id="77616297ab8389c2db18b8aa996822b8" class="idref" href="#77616297ab8389c2db18b8aa996822b8"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="N:62" class="idref" href="#N:62"><span class="id" title="binder">N</span></a> <a id="M:63" class="idref" href="#M:63"><span class="id" title="binder">M</span></a> (<a id="H:64" class="idref" href="#H:64"><span class="id" title="binder">H</span></a> : <a class="idref" href="MetaCoq.Template.WfAst.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#77616297ab8389c2db18b8aa996822b8"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:63"><span class="id" title="variable">M</span></a>) <a id="n:65" class="idref" href="#n:65"><span class="id" title="binder">n</span></a> <a id="p:66" class="idref" href="#p:66"><span class="id" title="binder">p</span></a>, <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:66"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:65"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:62"><span class="id" title="variable">N</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:66"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:62"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:65"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:63"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:65"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:63"><span class="id" title="variable">M</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">erewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#simpl_subst_rec"><span class="id" title="lemma">simpl_subst_rec</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>. <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mkApps_tRel" class="idref" href="#mkApps_tRel"><span class="id" title="lemma">mkApps_tRel</span></a> <a id="n:67" class="idref" href="#n:67"><span class="id" title="binder">n</span></a> <a id="a:68" class="idref" href="#a:68"><span class="id" title="binder">a</span></a> <a id="l:69" class="idref" href="#l:69"><span class="id" title="binder">l</span></a> : <a class="idref" href="MetaCoq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:67"><span class="id" title="variable">n</span></a>) (<a class="idref" href="MetaCoq.Template.LiftSubst.html#a:68"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:69"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:67"><span class="id" title="variable">n</span></a>) (<a class="idref" href="MetaCoq.Template.LiftSubst.html#a:68"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:69"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_mkApps" class="idref" href="#lift_mkApps"><span class="id" title="lemma">lift_mkApps</span></a> <a id="n:70" class="idref" href="#n:70"><span class="id" title="binder">n</span></a> <a id="k:71" class="idref" href="#k:71"><span class="id" title="binder">k</span></a> <a id="t:72" class="idref" href="#t:72"><span class="id" title="binder">t</span></a> <a id="l:73" class="idref" href="#l:73"><span class="id" title="binder">l</span></a> : <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:70"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:71"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:72"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:73"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:70"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:71"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:72"><span class="id" title="variable">t</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:70"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:71"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:73"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">n</span> <span class="id" title="var">k</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">k</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="commut_lift_subst_rec" class="idref" href="#commut_lift_subst_rec"><span class="id" title="lemma">commut_lift_subst_rec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="M:74" class="idref" href="#M:74"><span class="id" title="binder">M</span></a> <a id="N:75" class="idref" href="#N:75"><span class="id" title="binder">N</span></a> <a id="n:76" class="idref" href="#n:76"><span class="id" title="binder">n</span></a> <a id="p:77" class="idref" href="#p:77"><span class="id" title="binder">p</span></a> <a id="k:78" class="idref" href="#k:78"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.LiftSubst.html#k:78"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:77"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:76"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:78"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:75"><span class="id" title="variable">N</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:77"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:74"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:75"><span class="id" title="variable">N</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#p:77"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:76"><span class="id" title="variable">n</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:76"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:78"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:74"><span class="id" title="variable">M</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">M</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.Induction.html#term_forall_list_ind"><span class="id" title="lemma">term_forall_list_ind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>, ?<a class="idref" href="MetaCoq.Utils.MCProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a>, ?<a class="idref" href="MetaCoq.Common.BasicAst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<a class="idref" href="MetaCoq.Template.Ast.html#map_predicate_map_predicate"><span class="id" title="lemma">map_predicate_map_predicate</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">solve_all</span>].<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="var">nth_leb_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <a class="idref" href="MetaCoq.Template.LiftSubst.html#simpl_lift"><span class="id" title="lemma">simpl_lift</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">easy</span>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#lift_mkApps"><span class="id" title="lemma">lift_mkApps</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="commut_lift_subst" class="idref" href="#commut_lift_subst"><span class="id" title="lemma">commut_lift_subst</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="M:79" class="idref" href="#M:79"><span class="id" title="binder">M</span></a> <a id="N:80" class="idref" href="#N:80"><span class="id" title="binder">N</span></a> <a id="k:81" class="idref" href="#k:81"><span class="id" title="binder">k</span></a>, <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:80"><span class="id" title="variable">N</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:81"><span class="id" title="variable">k</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> 1 <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:79"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> 1 (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:80"><span class="id" title="variable">N</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:81"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:79"><span class="id" title="variable">M</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#commut_lift_subst_rec"><span class="id" title="lemma">commut_lift_subst_rec</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="distr_lift_subst_rec" class="idref" href="#distr_lift_subst_rec"><span class="id" title="lemma">distr_lift_subst_rec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="M:82" class="idref" href="#M:82"><span class="id" title="binder">M</span></a> <a id="N:83" class="idref" href="#N:83"><span class="id" title="binder">N</span></a> <a id="n:84" class="idref" href="#n:84"><span class="id" title="binder">n</span></a> <a id="p:85" class="idref" href="#p:85"><span class="id" title="binder">p</span></a> <a id="k:86" class="idref" href="#k:86"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:84"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#p:85"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:86"><span class="id" title="variable">k</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:83"><span class="id" title="variable">N</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:85"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:82"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:84"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:86"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:83"><span class="id" title="variable">N</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:85"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:84"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#p:85"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:83"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:86"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:82"><span class="id" title="variable">M</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">M</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.Induction.html#term_forall_list_ind"><span class="id" title="lemma">term_forall_list_ind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [<a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="var">_</span> ⇒ <span class="id" title="var">cbn</span> -[<span class="id" title="var">plus</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>, ?<a class="idref" href="MetaCoq.Utils.MCProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a>, ?<a class="idref" href="MetaCoq.Common.BasicAst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<a class="idref" href="MetaCoq.Template.Ast.html#map_predicate_map_predicate"><span class="id" title="lemma">map_predicate_map_predicate</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">solve_all</span>].<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <span class="id" title="tactic">at</span> 4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">nth_leb_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Utils.MCList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">e0</span>. <span class="id" title="tactic">intros</span> [= &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#permute_lift"><span class="id" title="lemma">permute_lift</span></a> <span class="id" title="var">x</span> <span class="id" title="var">n0</span> <span class="id" title="var">k</span> <span class="id" title="var">p</span> 0).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#lift_mkApps"><span class="id" title="lemma">lift_mkApps</span></a>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>; <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="distr_lift_subst" class="idref" href="#distr_lift_subst"><span class="id" title="lemma">distr_lift_subst</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="M:87" class="idref" href="#M:87"><span class="id" title="binder">M</span></a> <a id="N:88" class="idref" href="#N:88"><span class="id" title="binder">N</span></a> <a id="n:89" class="idref" href="#n:89"><span class="id" title="binder">n</span></a> <a id="k:90" class="idref" href="#k:90"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:89"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:90"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst0"><span class="id" title="abbreviation">subst0</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:88"><span class="id" title="variable">N</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:87"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#subst0"><span class="id" title="abbreviation">subst0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:89"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:90"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:88"><span class="id" title="variable">N</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:89"><span class="id" title="variable">n</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:88"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:90"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:87"><span class="id" title="variable">M</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">pattern</span> <span class="id" title="var">k</span> <span class="id" title="tactic">at</span> 1 3 <span class="id" title="tactic">in</span> |- ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">k</span> <span class="id" title="keyword">with</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">k</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#distr_lift_subst_rec"><span class="id" title="lemma">distr_lift_subst_rec</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="distr_lift_subst10" class="idref" href="#distr_lift_subst10"><span class="id" title="lemma">distr_lift_subst10</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="M:91" class="idref" href="#M:91"><span class="id" title="binder">M</span></a> <a id="N:92" class="idref" href="#N:92"><span class="id" title="binder">N</span></a> <a id="n:93" class="idref" href="#n:93"><span class="id" title="binder">n</span></a> <a id="k:94" class="idref" href="#k:94"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:93"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:94"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst10"><span class="id" title="abbreviation">subst10</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:92"><span class="id" title="variable">N</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:91"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#subst10"><span class="id" title="abbreviation">subst10</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:93"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:94"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:92"><span class="id" title="variable">N</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:93"><span class="id" title="variable">n</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:94"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:91"><span class="id" title="variable">M</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <span class="id" title="tactic">in</span> |- ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pattern</span> <span class="id" title="var">k</span> <span class="id" title="tactic">at</span> 1 3 <span class="id" title="tactic">in</span> |- ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">k</span> <span class="id" title="keyword">with</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">k</span>); <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#distr_lift_subst_rec"><span class="id" title="lemma">distr_lift_subst_rec</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_mkApps" class="idref" href="#subst_mkApps"><span class="id" title="lemma">subst_mkApps</span></a> <a id="u:95" class="idref" href="#u:95"><span class="id" title="binder">u</span></a> <a id="k:96" class="idref" href="#k:96"><span class="id" title="binder">k</span></a> <a id="t:97" class="idref" href="#t:97"><span class="id" title="binder">t</span></a> <a id="l:98" class="idref" href="#l:98"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#u:95"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:96"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:97"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:98"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#u:95"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:96"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:97"><span class="id" title="variable">t</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#u:95"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:96"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:98"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">u</span> <span class="id" title="var">k</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">u</span> <span class="id" title="var">k</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="var">mkApps</span> <span class="id" title="tactic">at</span> 1. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">subst</span> <span class="id" title="tactic">at</span> 1 2. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaCoq.Template.AstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst1_mkApps" class="idref" href="#subst1_mkApps"><span class="id" title="lemma">subst1_mkApps</span></a> <a id="u:99" class="idref" href="#u:99"><span class="id" title="binder">u</span></a> <a id="k:100" class="idref" href="#k:100"><span class="id" title="binder">k</span></a> <a id="t:101" class="idref" href="#t:101"><span class="id" title="binder">t</span></a> <a id="l:102" class="idref" href="#l:102"><span class="id" title="binder">l</span></a> : <a class="idref" href="MetaCoq.Template.Ast.html#subst1"><span class="id" title="definition">subst1</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#u:99"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:100"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:101"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:102"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst1"><span class="id" title="definition">subst1</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#u:99"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:100"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:101"><span class="id" title="variable">t</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst1"><span class="id" title="definition">subst1</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#u:99"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:100"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:102"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#subst_mkApps"><span class="id" title="lemma">subst_mkApps</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="distr_subst_rec" class="idref" href="#distr_subst_rec"><span class="id" title="lemma">distr_subst_rec</span></a> <a id="b0c243fdea575b06d729ab1bfbed1dd2" class="idref" href="#b0c243fdea575b06d729ab1bfbed1dd2"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="M:104" class="idref" href="#M:104"><span class="id" title="binder">M</span></a> <a id="N:105" class="idref" href="#N:105"><span class="id" title="binder">N</span></a> (<a id="P:106" class="idref" href="#P:106"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="wfP:107" class="idref" href="#wfP:107"><span class="id" title="binder">wfP</span></a> : <a class="idref" href="MetaCoq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaCoq.Template.WfAst.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#b0c243fdea575b06d729ab1bfbed1dd2"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#P:106"><span class="id" title="variable">P</span></a>) <a id="n:108" class="idref" href="#n:108"><span class="id" title="binder">n</span></a> <a id="p:109" class="idref" href="#p:109"><span class="id" title="binder">p</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#P:106"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#p:109"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:108"><span class="id" title="variable">n</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:105"><span class="id" title="variable">N</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:109"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:104"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#P:106"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:108"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:105"><span class="id" title="variable">N</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:109"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#P:106"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#p:109"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:105"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:108"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:104"><span class="id" title="variable">M</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">M</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">M</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.Induction.html#term_forall_list_ind"><span class="id" title="lemma">term_forall_list_ind</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [<a class="idref" href="MetaCoq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">simpl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>, ?<a class="idref" href="MetaCoq.Utils.MCProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a>, ?<a class="idref" href="MetaCoq.Common.BasicAst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<a class="idref" href="MetaCoq.Template.Ast.html#map_predicate_map_predicate"><span class="id" title="lemma">map_predicate_map_predicate</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">solve_all</span>].<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">leb_spec</span></a> <span class="id" title="var">p</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.Utils.MCList.html#nth_error_spec"><span class="id" title="lemma">nth_error_spec</span></a> <span class="id" title="var">N</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">rewrite</span> → <a class="idref" href="MetaCoq.Template.LiftSubst.html#subst_rel_lt"><span class="id" title="lemma">subst_rel_lt</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#subst_rel_eq"><span class="id" title="lemma">subst_rel_eq</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="tactic">rewrite</span> → <a class="idref" href="MetaCoq.Utils.MCList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>, <span class="id" title="var">e</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#commut_lift_subst_rec"><span class="id" title="lemma">commut_lift_subst_rec</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <span class="id" title="tactic">at</span> 4.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">leb_spec</span></a> (<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">N</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">n0</span>) <span class="id" title="var">n</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.Utils.MCList.html#nth_error_spec"><span class="id" title="lemma">nth_error_spec</span></a> <span class="id" title="var">P</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">N</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">n0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="var">erewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#subst_rel_eq"><span class="id" title="lemma">subst_rel_eq</span></a>. 2:<span class="id" title="tactic">eauto</span>. 2:<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">N</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">n0</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <span class="id" title="var">P</span> <span class="id" title="var">n0</span>) <span class="id" title="var">N</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">n0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="var">erewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#simpl_subst_rec"><span class="id" title="lemma">simpl_subst_rec</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.Utils.All_Forall.html#nth_error_all"><span class="id" title="lemma">nth_error_all</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaCoq.Template.LiftSubst.html#subst_rel_gt"><span class="id" title="lemma">subst_rel_gt</span></a>; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+++ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#subst_rel_lt"><span class="id" title="lemma">subst_rel_lt</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <a class="idref" href="MetaCoq.Template.LiftSubst.html#subst_rel_gt"><span class="id" title="lemma">subst_rel_gt</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>. <span class="id" title="tactic">trivial</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaCoq.Template.LiftSubst.html#subst_rel_lt"><span class="id" title="lemma">subst_rel_lt</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaCoq.Template.LiftSubst.html#subst_mkApps"><span class="id" title="lemma">subst_mkApps</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="distr_subst" class="idref" href="#distr_subst"><span class="id" title="lemma">distr_subst</span></a> <a id="34ae1c9c84b00c7df18c2fc2612b37e3" class="idref" href="#34ae1c9c84b00c7df18c2fc2612b37e3"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="P:111" class="idref" href="#P:111"><span class="id" title="binder">P</span></a> (<a id="wfP:112" class="idref" href="#wfP:112"><span class="id" title="binder">wfP</span></a> : <a class="idref" href="MetaCoq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaCoq.Template.WfAst.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#34ae1c9c84b00c7df18c2fc2612b37e3"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#P:111"><span class="id" title="variable">P</span></a>) <a id="N:113" class="idref" href="#N:113"><span class="id" title="binder">N</span></a> <a id="M:114" class="idref" href="#M:114"><span class="id" title="binder">M</span></a> <a id="k:115" class="idref" href="#k:115"><span class="id" title="binder">k</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#P:111"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:115"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst0"><span class="id" title="abbreviation">subst0</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:113"><span class="id" title="variable">N</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:114"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#subst0"><span class="id" title="abbreviation">subst0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#P:111"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:115"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:113"><span class="id" title="variable">N</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#P:111"><span class="id" title="variable">P</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:113"><span class="id" title="variable">N</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:115"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:114"><span class="id" title="variable">M</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pattern</span> <span class="id" title="var">k</span> <span class="id" title="tactic">at</span> 1 3 <span class="id" title="tactic">in</span> |- ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">k</span> <span class="id" title="keyword">with</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">k</span>). <span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#distr_subst_rec"><span class="id" title="lemma">distr_subst_rec</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_closed" class="idref" href="#lift_closed"><span class="id" title="lemma">lift_closed</span></a> <a id="n:116" class="idref" href="#n:116"><span class="id" title="binder">n</span></a> <a id="k:117" class="idref" href="#k:117"><span class="id" title="binder">k</span></a> <a id="t:118" class="idref" href="#t:118"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaCoq.Template.Ast.html#closedn"><span class="id" title="definition">closedn</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:117"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:118"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:116"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:117"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:118"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:118"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">t</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.Induction.html#term_forall_list_ind"><span class="id" title="lemma">term_forall_list_ind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>, ?<a class="idref" href="MetaCoq.Utils.MCProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a>, ?<a class="idref" href="MetaCoq.Common.BasicAst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<a class="idref" href="MetaCoq.Template.Ast.html#map_predicate_map_predicate"><span class="id" title="lemma">map_predicate_map_predicate</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="var">closed</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.BasicAst.html#test_def"><span class="id" title="definition">test_def</span></a>, <a class="idref" href="MetaCoq.Template.Ast.html#test_predicate"><span class="id" title="definition">test_predicate</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">simpl</span> <span class="id" title="var">lift</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="var">closed</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">rtoProp</span>; <span class="id" title="var">solve_all</span>]; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#lift_rel_lt"><span class="id" title="lemma">lift_rel_lt</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.ltb_spec"><span class="id" title="lemma">Nat.ltb_spec</span></a> <span class="id" title="var">n0</span> <span class="id" title="var">k</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="var">lift</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.BasicAst.html#test_def"><span class="id" title="definition">test_def</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>. <span class="id" title="var">toProp</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="var">lift</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.BasicAst.html#test_def"><span class="id" title="definition">test_def</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>. <span class="id" title="var">toProp</span>. <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="closed_upwards" class="idref" href="#closed_upwards"><span class="id" title="lemma">closed_upwards</span></a> {<a id="k:119" class="idref" href="#k:119"><span class="id" title="binder">k</span></a> <a id="t:120" class="idref" href="#t:120"><span class="id" title="binder">t</span></a>} <a id="k':121" class="idref" href="#k':121"><span class="id" title="binder">k'</span></a> : <a class="idref" href="MetaCoq.Template.Ast.html#closedn"><span class="id" title="definition">closedn</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:119"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:120"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k':121"><span class="id" title="variable">k'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:119"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#closedn"><span class="id" title="definition">closedn</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k':121"><span class="id" title="variable">k'</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:120"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">k</span> <span class="id" title="var">k'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">t</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.Induction.html#term_forall_list_ind"><span class="id" title="lemma">term_forall_list_ind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>, ?<a class="idref" href="MetaCoq.Utils.MCProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a>, ?<a class="idref" href="MetaCoq.Common.BasicAst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<a class="idref" href="MetaCoq.Template.Ast.html#map_predicate_map_predicate"><span class="id" title="lemma">map_predicate_map_predicate</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="var">closed</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Utils.MCProd.html#test_snd"><span class="id" title="definition">test_snd</span></a>, <a class="idref" href="MetaCoq.Common.BasicAst.html#test_def"><span class="id" title="definition">test_def</span></a>, <a class="idref" href="MetaCoq.Template.Ast.html#test_predicate"><span class="id" title="definition">test_predicate</span></a>, <a class="idref" href="MetaCoq.Template.Ast.html#test_branch"><span class="id" title="definition">test_branch</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [(<span class="id" title="tactic">try</span> <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">repeat</span> (<span class="id" title="var">rtoProp</span>; <span class="id" title="var">solve_all</span>); <span class="id" title="tactic">eauto</span>)].<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.ltb_spec"><span class="id" title="lemma">ltb_spec</span></a> <span class="id" title="var">n</span> <span class="id" title="var">k'</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.ltb_lt"><span class="id" title="lemma">ltb_lt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_empty" class="idref" href="#subst_empty"><span class="id" title="lemma">subst_empty</span></a> <a id="89c991e573d576d4ce9b4ce8f6af8d89" class="idref" href="#89c991e573d576d4ce9b4ce8f6af8d89"><span class="id" title="binder">Σ</span></a> <a id="k:123" class="idref" href="#k:123"><span class="id" title="binder">k</span></a> <a id="a:124" class="idref" href="#a:124"><span class="id" title="binder">a</span></a> : <a class="idref" href="MetaCoq.Template.WfAst.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#89c991e573d576d4ce9b4ce8f6af8d89"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#a:124"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:123"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#a:124"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#a:124"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="tactic">in</span> <span class="id" title="var">k</span> |- × <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.WfAst.html#term_wf_forall_list_ind"><span class="id" title="lemma">term_wf_forall_list_ind</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">solve_all</span>].<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">elim</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.compare_spec"><span class="id" title="lemma">Nat.compare_spec</span></a> <span class="id" title="var">k</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">Nat.leb_spec</span></a> <span class="id" title="var">k</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 0) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="n':126" class="idref" href="#n':126"><span class="id" title="binder">n'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n':125"><span class="id" title="variable">n'</span></a>). <span class="id" title="tactic">∃</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.pred"><span class="id" title="definition">pred</span></a> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">k</span>)). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHX</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#mkApps_tApp"><span class="id" title="lemma">mkApps_tApp</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_to_extended_list_k" class="idref" href="#lift_to_extended_list_k"><span class="id" title="lemma">lift_to_extended_list_k</span></a> <a id="6e782b379a22be72fd8811f565d97df0" class="idref" href="#6e782b379a22be72fd8811f565d97df0"><span class="id" title="binder">Γ</span></a> <a id="k:128" class="idref" href="#k:128"><span class="id" title="binder">k</span></a> : <span class="id" title="keyword">∀</span> <a id="k':129" class="idref" href="#k':129"><span class="id" title="binder">k'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#Env.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#6e782b379a22be72fd8811f565d97df0"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#k':129"><span class="id" title="variable">k'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:128"><span class="id" title="variable">k</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k':129"><span class="id" title="variable">k'</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#Env.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#6e782b379a22be72fd8811f565d97df0"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:128"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.Ast.html#Env.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">k'</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaCoq.Template.Ast.html#Env.reln_alt_eq"><span class="id" title="lemma">reln_alt_eq</span></a> !<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">k</span>, <span class="id" title="var">k'</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">body</span>|] <span class="id" title="var">ty</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>, (<span class="id" title="var">IHΓ</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) <span class="id" title="var">k'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>, (<span class="id" title="var">IHΓ</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) <span class="id" title="var">k'</span>), <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="simpl_subst_k" class="idref" href="#simpl_subst_k"><span class="id" title="lemma">simpl_subst_k</span></a> <a id="ac561eb9930a784cc140305591fb82e6" class="idref" href="#ac561eb9930a784cc140305591fb82e6"><span class="id" title="binder">Σ</span></a> (<a id="N:131" class="idref" href="#N:131"><span class="id" title="binder">N</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="M:132" class="idref" href="#M:132"><span class="id" title="binder">M</span></a> : <a class="idref" href="MetaCoq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.WfAst.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#ac561eb9930a784cc140305591fb82e6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:132"><span class="id" title="variable">M</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="k:133" class="idref" href="#k:133"><span class="id" title="binder">k</span></a> <a id="p:134" class="idref" href="#p:134"><span class="id" title="binder">p</span></a>, <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:134"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaCoq.Template.LiftSubst.html#N:131"><span class="id" title="variable">N</span></a><a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#N:131"><span class="id" title="variable">N</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:133"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#p:134"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:133"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:132"><span class="id" title="variable">M</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#M:132"><span class="id" title="variable">M</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a> <a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">N</span><a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#simpl_subst_rec"><span class="id" title="lemma">simpl_subst_rec</span></a>, <a class="idref" href="MetaCoq.Template.LiftSubst.html#lift0_id"><span class="id" title="lemma">lift0_id</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_app_decomp" class="idref" href="#subst_app_decomp"><span class="id" title="lemma">subst_app_decomp</span></a> <a id="ad4a3b2d31090031b38b45a91aa8372b" class="idref" href="#ad4a3b2d31090031b38b45a91aa8372b"><span class="id" title="binder">Σ</span></a> <a id="l:136" class="idref" href="#l:136"><span class="id" title="binder">l</span></a> <a id="l':137" class="idref" href="#l':137"><span class="id" title="binder">l'</span></a> <a id="k:138" class="idref" href="#k:138"><span class="id" title="binder">k</span></a> <a id="t:139" class="idref" href="#t:139"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.WfAst.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#ad4a3b2d31090031b38b45a91aa8372b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:139"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaCoq.Template.WfAst.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#ad4a3b2d31090031b38b45a91aa8372b"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:136"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#l:136"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l':137"><span class="id" title="variable">l'</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:138"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:139"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l':137"><span class="id" title="variable">l'</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:138"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">List.map</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l':137"><span class="id" title="variable">l'</span></a>)) <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:136"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:138"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:139"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wft</span> <span class="id" title="var">wfl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">wft</span> <span class="id" title="tactic">in</span> <span class="id" title="var">k</span> |- × <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.WfAst.html#term_wf_forall_list_ind"><span class="id" title="lemma">term_wf_forall_list_ind</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MetaCoq.Template.LiftSubst.html#subst_mkApps"><span class="id" title="lemma">subst_mkApps</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">change_Sk</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>, ?<a class="idref" href="MetaCoq.Utils.MCProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a>, ?<a class="idref" href="MetaCoq.Common.BasicAst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<a class="idref" href="MetaCoq.Template.Ast.html#map_predicate_map_predicate"><span class="id" title="lemma">map_predicate_map_predicate</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>; <span class="id" title="var">solve_all</span>).<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="var">nth_leb_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Utils.MCList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">injection</span> <span class="id" title="var">e0</span>; <span class="id" title="tactic">intros</span> &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <a class="idref" href="MetaCoq.Template.LiftSubst.html#permute_lift"><span class="id" title="lemma">permute_lift</span></a> <span class="id" title="tactic">by</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a> <a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l'</span><a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> → <a class="idref" href="MetaCoq.Template.LiftSubst.html#simpl_subst_rec"><span class="id" title="lemma">simpl_subst_rec</span></a>, <a class="idref" href="MetaCoq.Template.LiftSubst.html#lift0_id"><span class="id" title="lemma">lift0_id</span></a>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="keyword">wf</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.WfAst.html#wf_lift"><span class="id" title="lemma">wf_lift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.Utils.All_Forall.html#nth_error_all"><span class="id" title="lemma">nth_error_all</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_app_simpl" class="idref" href="#subst_app_simpl"><span class="id" title="lemma">subst_app_simpl</span></a> <a id="75ed2921b549f9c84d9f181eb5d84e73" class="idref" href="#75ed2921b549f9c84d9f181eb5d84e73"><span class="id" title="binder">Σ</span></a> <a id="l:141" class="idref" href="#l:141"><span class="id" title="binder">l</span></a> <a id="l':142" class="idref" href="#l':142"><span class="id" title="binder">l'</span></a> <a id="k:143" class="idref" href="#k:143"><span class="id" title="binder">k</span></a> <a id="t:144" class="idref" href="#t:144"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.WfAst.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#75ed2921b549f9c84d9f181eb5d84e73"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:144"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaCoq.Template.WfAst.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#75ed2921b549f9c84d9f181eb5d84e73"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:141"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaCoq.Template.WfAst.html#wf"><span class="id" title="inductive">wf</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#75ed2921b549f9c84d9f181eb5d84e73"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#l':142"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#l:141"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l':142"><span class="id" title="variable">l'</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:143"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:144"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:141"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:143"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l':142"><span class="id" title="variable">l'</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#k:143"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:141"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:144"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wft</span> <span class="id" title="var">wfl</span> <span class="id" title="var">wfl'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">wft</span> <span class="id" title="tactic">in</span> <span class="id" title="var">k</span> |- × <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.WfAst.html#term_wf_forall_list_ind"><span class="id" title="lemma">term_wf_forall_list_ind</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MetaCoq.Template.LiftSubst.html#subst_mkApps"><span class="id" title="lemma">subst_mkApps</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">change_Sk</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>, ?<a class="idref" href="MetaCoq.Utils.MCProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a>, ?<a class="idref" href="MetaCoq.Common.BasicAst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>, ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>, ?<a class="idref" href="MetaCoq.Template.Ast.html#map_predicate_map_predicate"><span class="id" title="lemma">map_predicate_map_predicate</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>; <span class="id" title="var">solve_all</span>; <span class="id" title="tactic">eauto</span>).<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="var">nth_leb_simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> → <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>, <a class="idref" href="MetaCoq.Template.LiftSubst.html#simpl_subst"><span class="id" title="lemma">simpl_subst</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.Utils.All_Forall.html#nth_error_all"><span class="id" title="lemma">nth_error_all</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isLambda_subst" class="idref" href="#isLambda_subst"><span class="id" title="lemma">isLambda_subst</span></a> (<a id="s:145" class="idref" href="#s:145"><span class="id" title="binder">s</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) <a id="k:146" class="idref" href="#k:146"><span class="id" title="binder">k</span></a> (<a id="bod:147" class="idref" href="#bod:147"><span class="id" title="binder">bod</span></a> : <a class="idref" href="MetaCoq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#bod:147"><span class="id" title="variable">bod</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#s:145"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:146"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#bod:147"><span class="id" title="variable">bod</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">bod</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_vass_map_def" class="idref" href="#map_vass_map_def"><span class="id" title="lemma">map_vass_map_def</span></a> <a id="g:148" class="idref" href="#g:148"><span class="id" title="binder">g</span></a> <a id="l:149" class="idref" href="#l:149"><span class="id" title="binder">l</span></a> <a id="n:150" class="idref" href="#n:150"><span class="id" title="binder">n</span></a> <a id="k:151" class="idref" href="#k:151"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.Utils.MCList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:152" class="idref" href="#i:152"><span class="id" title="binder">i</span></a> (<a id="d:153" class="idref" href="#d:153"><span class="id" title="binder">d</span></a> : <a class="idref" href="MetaCoq.Common.BasicAst.html#def"><span class="id" title="record">def</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) ⇒ <a class="idref" href="MetaCoq.Template.Ast.html#Env.vass"><span class="id" title="definition">vass</span></a> (<a class="idref" href="MetaCoq.Common.BasicAst.html#dname"><span class="id" title="projection">dname</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#d:153"><span class="id" title="variable">d</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#i:152"><span class="id" title="variable">i</span></a> (<a class="idref" href="MetaCoq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#d:153"><span class="id" title="variable">d</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaCoq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:150"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:151"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#g:148"><span class="id" title="variable">g</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:149"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.Utils.MCList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:156" class="idref" href="#i:156"><span class="id" title="binder">i</span></a> <a id="d:157" class="idref" href="#d:157"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="MetaCoq.Common.BasicAst.html#map_decl"><span class="id" title="definition">map_decl</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:150"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#i:156"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:151"><span class="id" title="variable">k</span></a>)) <a class="idref" href="MetaCoq.Template.LiftSubst.html#d:157"><span class="id" title="variable">d</span></a>) (<a class="idref" href="MetaCoq.Utils.MCList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:154" class="idref" href="#i:154"><span class="id" title="binder">i</span></a> (<a id="d:155" class="idref" href="#d:155"><span class="id" title="binder">d</span></a> : <a class="idref" href="MetaCoq.Common.BasicAst.html#def"><span class="id" title="record">def</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) ⇒ <a class="idref" href="MetaCoq.Template.Ast.html#Env.vass"><span class="id" title="definition">vass</span></a> (<a class="idref" href="MetaCoq.Common.BasicAst.html#dname"><span class="id" title="projection">dname</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#d:155"><span class="id" title="variable">d</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#i:154"><span class="id" title="variable">i</span></a> (<a class="idref" href="MetaCoq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#d:155"><span class="id" title="variable">d</span></a>))) <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:149"><span class="id" title="variable">l</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Utils.MCList.html#mapi_mapi"><span class="id" title="lemma">mapi_mapi</span></a> <a class="idref" href="MetaCoq.Utils.MCList.html#mapi_map"><span class="id" title="lemma">mapi_map</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Utils.MCList.html#mapi_ext"><span class="id" title="lemma">mapi_ext</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.BasicAst.html#map_decl"><span class="id" title="definition">map_decl</span></a>, <a class="idref" href="MetaCoq.Template.Ast.html#Env.vass"><span class="id" title="definition">vass</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#permute_lift"><span class="id" title="lemma">permute_lift</span></a>. <span class="id" title="var">lia</span>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="comment">(*<br/>
Lemma&nbsp;noccur_between_subst&nbsp;k&nbsp;n&nbsp;t&nbsp;:&nbsp;noccur_between&nbsp;k&nbsp;n&nbsp;t&nbsp;-&gt;<br/>
&nbsp;&nbsp;closedn&nbsp;(n&nbsp;+&nbsp;k)&nbsp;t&nbsp;-&gt;&nbsp;closedn&nbsp;k&nbsp;t.<br/>
Proof.<br/>
Qed.&nbsp;&nbsp;*)</span> <span class="comment">(*&nbsp;TODO&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="strip_casts_lift" class="idref" href="#strip_casts_lift"><span class="id" title="lemma">strip_casts_lift</span></a> <a id="n:158" class="idref" href="#n:158"><span class="id" title="binder">n</span></a> <a id="k:159" class="idref" href="#k:159"><span class="id" title="binder">k</span></a> <a id="t:160" class="idref" href="#t:160"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.AstUtils.html#strip_casts"><span class="id" title="definition">strip_casts</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:158"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:159"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:160"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:158"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:159"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.AstUtils.html#strip_casts"><span class="id" title="definition">strip_casts</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:160"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">k</span> |- × <span class="id" title="keyword">using</span> <a class="idref" href="MetaCoq.Template.Induction.html#term_forall_list_ind"><span class="id" title="lemma">term_forall_list_ind</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>  ?<a class="idref" href="MetaCoq.Utils.MCProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a> ?<a class="idref" href="MetaCoq.Common.BasicAst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a> ?<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map_length"><span class="id" title="lemma">map_length</span></a>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="var">solve_all</span>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#lift_mkApps"><span class="id" title="lemma">lift_mkApps</span></a> <span class="id" title="var">IHt</span> <a class="idref" href="MetaCoq.Utils.MCList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaCoq.Template.Ast.html#map_predicate_map_predicate"><span class="id" title="lemma">map_predicate_map_predicate</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.Ast.html#map_predicate"><span class="id" title="definition">map_predicate</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mkApps_ex" class="idref" href="#mkApps_ex"><span class="id" title="lemma">mkApps_ex</span></a> <a id="t:161" class="idref" href="#t:161"><span class="id" title="binder">t</span></a> <a id="u:162" class="idref" href="#u:162"><span class="id" title="binder">u</span></a> <a id="l:163" class="idref" href="#l:163"><span class="id" title="binder">l</span></a> : <a class="idref" href="MetaCoq.Utils.MCPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="f:164" class="idref" href="#f:164"><span class="id" title="binder">f</span></a> <a id="args:165" class="idref" href="#args:165"><span class="id" title="binder">args</span></a><a class="idref" href="MetaCoq.Utils.MCPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#mkApps"><span class="id" title="definition">Ast.mkApps</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:161"><span class="id" title="variable">t</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#u:162"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:163"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#tApp"><span class="id" title="constructor">Ast.tApp</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#f:164"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#args:165"><span class="id" title="variable">args</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eexists</span> <span class="id" title="var">_</span>, <span class="id" title="var">_</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="comment">(*<br/>
Lemma&nbsp;mkApps_tApp'&nbsp;f&nbsp;l&nbsp;l'&nbsp;:&nbsp;mkApps&nbsp;(tApp&nbsp;f&nbsp;l)&nbsp;l'&nbsp;=&nbsp;mkApps&nbsp;f&nbsp;(l&nbsp;++&nbsp;l').<br/>
Proof.<br/>
&nbsp;&nbsp;induction&nbsp;l';&nbsp;simpl.&nbsp;rewrite&nbsp;app_nil_r.&nbsp;&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_length_ind" class="idref" href="#list_length_ind"><span class="id" title="lemma">list_length_ind</span></a> {<a id="A:166" class="idref" href="#A:166"><span class="id" title="binder">A</span></a>} (<a id="P:167" class="idref" href="#P:167"><span class="id" title="binder">P</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#A:166"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="p0:168" class="idref" href="#p0:168"><span class="id" title="binder">p0</span></a> : <a class="idref" href="MetaCoq.Template.LiftSubst.html#P:167"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;(<a id="pS:172" class="idref" href="#pS:172"><span class="id" title="binder">pS</span></a> : <span class="id" title="keyword">∀</span> <a id="d:169" class="idref" href="#d:169"><span class="id" title="binder">d</span></a> <a id="cf9ed6d8a61ce68e821384f5f41630c7" class="idref" href="#cf9ed6d8a61ce68e821384f5f41630c7"><span class="id" title="binder">Γ</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="0a797b024025dd69735753c5b0a1a85b" class="idref" href="#0a797b024025dd69735753c5b0a1a85b"><span class="id" title="binder">Γ'</span></a>, <a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaCoq.Template.LiftSubst.html#0a797b024025dd69735753c5b0a1a85b"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaCoq.Template.LiftSubst.html#cf9ed6d8a61ce68e821384f5f41630c7"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#P:167"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#0a797b024025dd69735753c5b0a1a85b"><span class="id" title="variable">Γ'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#P:167"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaCoq.Template.LiftSubst.html#d:169"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#cf9ed6d8a61ce68e821384f5f41630c7"><span class="id" title="variable">Γ</span></a>))<br/>
&nbsp;&nbsp;<a id="c78756a1f6abcb48e68e03dbf5894050" class="idref" href="#c78756a1f6abcb48e68e03dbf5894050"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaCoq.Template.LiftSubst.html#P:167"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#c78756a1f6abcb48e68e03dbf5894050"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Peano.html#le_n"><span class="id" title="constructor">le_n</span></a> <a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaCoq.Utils.MCList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ</span> |- ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Γ</span>; [|<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">elimtype</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#False"><span class="id" title="inductive">False</span></a>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">p0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Γ</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">p0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">pS</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="strip_casts_mkApps_tApp" class="idref" href="#strip_casts_mkApps_tApp"><span class="id" title="lemma">strip_casts_mkApps_tApp</span></a> <a id="f:174" class="idref" href="#f:174"><span class="id" title="binder">f</span></a> <a id="l:175" class="idref" href="#l:175"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#isApp"><span class="id" title="definition">isApp</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#f:174"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.AstUtils.html#strip_casts"><span class="id" title="definition">strip_casts</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#f:174"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:175"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.AstUtils.html#strip_casts"><span class="id" title="definition">strip_casts</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#f:174"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:175"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#mkApps_tApp"><span class="id" title="lemma">mkApps_tApp</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="strip_casts_mkApps" class="idref" href="#strip_casts_mkApps"><span class="id" title="lemma">strip_casts_mkApps</span></a> <a id="f:176" class="idref" href="#f:176"><span class="id" title="binder">f</span></a> <a id="l:177" class="idref" href="#l:177"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#isApp"><span class="id" title="definition">isApp</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#f:176"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.AstUtils.html#strip_casts"><span class="id" title="definition">strip_casts</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#f:176"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:177"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaCoq.Template.AstUtils.html#strip_casts"><span class="id" title="definition">strip_casts</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#f:176"><span class="id" title="variable">f</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaCoq.Template.AstUtils.html#strip_casts"><span class="id" title="definition">strip_casts</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#l:177"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.LiftSubst.html#strip_casts_mkApps_tApp"><span class="id" title="lemma">strip_casts_mkApps_tApp</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_it_mkProd_or_LetIn" class="idref" href="#subst_it_mkProd_or_LetIn"><span class="id" title="lemma">subst_it_mkProd_or_LetIn</span></a> <a id="n:178" class="idref" href="#n:178"><span class="id" title="binder">n</span></a> <a id="k:179" class="idref" href="#k:179"><span class="id" title="binder">k</span></a> <a id="ctx:180" class="idref" href="#ctx:180"><span class="id" title="binder">ctx</span></a> <a id="t:181" class="idref" href="#t:181"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:178"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:179"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#Env.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#ctx:180"><span class="id" title="variable">ctx</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:181"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Ast.html#Env.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> (<a class="idref" href="MetaCoq.Template.Ast.html#Env.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:178"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:179"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#ctx:180"><span class="id" title="variable">ctx</span></a>) (<a class="idref" href="MetaCoq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#n:178"><span class="id" title="variable">n</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#ctx:180"><span class="id" title="variable">ctx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Nat.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaCoq.Template.LiftSubst.html#k:179"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaCoq.Template.LiftSubst.html#t:181"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ctx</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">k</span>, <span class="id" title="var">t</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="MetaCoq.Template.Ast.html#Env.subst_context_snoc"><span class="id" title="lemma">subst_context_snoc</span></a> <span class="id" title="var">n</span> <span class="id" title="var">k</span> <span class="id" title="var">ctx</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.BasicAst.html#snoc"><span class="id" title="definition">snoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> → <span class="id" title="var">IHctx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="MetaCoq.Template.Ast.html#Env.subst_context_snoc"><span class="id" title="lemma">subst_context_snoc</span></a> <span class="id" title="var">n</span> <span class="id" title="var">k</span> <span class="id" title="var">ctx</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
