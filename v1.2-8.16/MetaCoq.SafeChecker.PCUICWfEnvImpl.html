<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Library MetaCoq.SafeChecker.PCUICWfEnvImpl</h1>

<div class="code">
<span class="comment">(*&nbsp;Distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;MIT&nbsp;license.&nbsp;*)</span><br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.ssr.ssreflect.html#"><span class="id" title="library">ssreflect</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.ssr.ssrbool.html#"><span class="id" title="library">ssrbool</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaCoq.Utils.utils.html#"><span class="id" title="library">utils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Common</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaCoq.Common.config.html#"><span class="id" title="library">config</span></a> <a class="idref" href="MetaCoq.Common.uGraph.html#"><span class="id" title="library">uGraph</span></a> <a class="idref" href="MetaCoq.Common.EnvMap.html#"><span class="id" title="library">EnvMap</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#"><span class="id" title="library">PCUICAst</span></a> <a class="idref" href="MetaCoq.PCUIC.utils.PCUICAstUtils.html#"><span class="id" title="library">PCUICAstUtils</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICEquality.html#"><span class="id" title="library">PCUICEquality</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICReduction.html#"><span class="id" title="library">PCUICReduction</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.PCUIC.Syntax.PCUICReflect.html#"><span class="id" title="library">PCUICReflect</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICSafeLemmata.html#"><span class="id" title="library">PCUICSafeLemmata</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#"><span class="id" title="library">PCUICTyping</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#"><span class="id" title="library">PCUICGlobalEnv</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICWfUniverses.html#"><span class="id" title="library">PCUICWfUniverses</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.SafeChecker</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#"><span class="id" title="library">PCUICEqualityDec</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#"><span class="id" title="library">PCUICWfEnv</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Equations</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="abstract_guard_impl" class="idref" href="#abstract_guard_impl"><span class="id" title="record">abstract_guard_impl</span></a> :=<br/>
&nbsp;&nbsp;{ <a id="guard_impl" class="idref" href="#guard_impl"><span class="id" title="projection">guard_impl</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#FixCoFix"><span class="id" title="inductive">FixCoFix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Common.BasicAst.html#mfixpoint"><span class="id" title="definition">mfixpoint</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="guard_correct" class="idref" href="#guard_correct"><span class="id" title="projection">guard_correct</span></a> : <span class="id" title="keyword">∀</span> <a id="fix_cofix:3" class="idref" href="#fix_cofix:3"><span class="id" title="binder">fix_cofix</span></a> <a id="9c6d78f4cdf6dede5e109a175164bdaa" class="idref" href="#9c6d78f4cdf6dede5e109a175164bdaa"><span class="id" title="binder">Σ</span></a> <a id="a66eb0e7c85ea280f33904e5ac83af54" class="idref" href="#a66eb0e7c85ea280f33904e5ac83af54"><span class="id" title="binder">Γ</span></a> <a id="mfix:6" class="idref" href="#mfix:6"><span class="id" title="binder">mfix</span></a>, <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#guard"><span class="id" title="method">guard</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#fix_cofix:3"><span class="id" title="variable">fix_cofix</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9c6d78f4cdf6dede5e109a175164bdaa"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a66eb0e7c85ea280f33904e5ac83af54"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#mfix:6"><span class="id" title="variable">mfix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#guard_impl:2"><span class="id" title="method">guard_impl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#fix_cofix:3"><span class="id" title="variable">fix_cofix</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9c6d78f4cdf6dede5e109a175164bdaa"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a66eb0e7c85ea280f33904e5ac83af54"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#mfix:6"><span class="id" title="variable">mfix</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="fake_guard_impl" class="idref" href="#fake_guard_impl"><span class="id" title="definition">fake_guard_impl</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#FixCoFix"><span class="id" title="inductive">FixCoFix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Common.BasicAst.html#mfixpoint"><span class="id" title="definition">mfixpoint</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="fix_cofix:8" class="idref" href="#fix_cofix:8"><span class="id" title="binder">fix_cofix</span></a> <a id="2ff76d4cddec082cd899c55bae9fabf3" class="idref" href="#2ff76d4cddec082cd899c55bae9fabf3"><span class="id" title="binder">Σ</span></a> <a id="2c1ebf9f6f644b76d36a0d699f8e9ac4" class="idref" href="#2c1ebf9f6f644b76d36a0d699f8e9ac4"><span class="id" title="binder">Γ</span></a> <a id="mfix:11" class="idref" href="#mfix:11"><span class="id" title="binder">mfix</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="reference_impl_ext" class="idref" href="#reference_impl_ext"><span class="id" title="record">reference_impl_ext</span></a> {<a id="cf:12" class="idref" href="#cf:12"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:13" class="idref" href="#guard:13"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="reference_impl_env_ext" class="idref" href="#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a> :&gt; <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="reference_impl_ext_wf" class="idref" href="#reference_impl_ext_wf"><span class="id" title="projection">reference_impl_ext_wf</span></a> :&gt; <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext:15"><span class="id" title="method">reference_impl_env_ext</span></a> <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="reference_impl_ext_graph" class="idref" href="#reference_impl_ext_graph"><span class="id" title="projection">reference_impl_ext_graph</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#graph_of_wf_ext"><span class="id" title="lemma">graph_of_wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext_wf:16"><span class="id" title="method">reference_impl_ext_wf</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="reference_impl_ext_graph_wf" class="idref" href="#reference_impl_ext_graph_wf"><span class="id" title="projection">reference_impl_ext_graph_wf</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#graph_of_wf_ext"><span class="id" title="lemma">graph_of_wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext_wf:16"><span class="id" title="method">reference_impl_ext_wf</span></a>)<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="reference_impl" class="idref" href="#reference_impl"><span class="id" title="record">reference_impl</span></a> {<a id="cf:19" class="idref" href="#cf:19"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="reference_impl_env" class="idref" href="#reference_impl_env"><span class="id" title="projection">reference_impl_env</span></a> :&gt; <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="reference_impl_wf" class="idref" href="#reference_impl_wf"><span class="id" title="projection">reference_impl_wf</span></a> :&gt; <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env:21"><span class="id" title="method">reference_impl_env</span></a> <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="reference_impl_graph" class="idref" href="#reference_impl_graph"><span class="id" title="projection">reference_impl_graph</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#graph_of_wf"><span class="id" title="lemma">graph_of_wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_wf:22"><span class="id" title="method">reference_impl_wf</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="reference_impl_graph_wf" class="idref" href="#reference_impl_graph_wf"><span class="id" title="projection">reference_impl_graph_wf</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#graph_of_wf"><span class="id" title="lemma">graph_of_wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_wf:22"><span class="id" title="method">reference_impl_wf</span></a>)<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="reference_pop" class="idref" href="#reference_pop"><span class="id" title="definition">reference_pop</span></a> {<a id="cf:25" class="idref" href="#cf:25"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="e023703f3460855264e8fbe327a7ed6a" class="idref" href="#e023703f3460855264e8fbe327a7ed6a"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl"><span class="id" title="record">reference_impl</span></a>) : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl"><span class="id" title="record">reference_impl</span></a> :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#e023703f3460855264e8fbe327a7ed6a"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#e023703f3460855264e8fbe327a7ed6a"><span class="id" title="variable">Σ</span></a><br/>
&nbsp;| (<span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">decls</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env"><span class="id" title="projection">reference_impl_env</span></a> := {| <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#e023703f3460855264e8fbe327a7ed6a"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a>); <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> := <span class="id" title="var">decls</span>; <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.retroknowledge"><span class="id" title="projection">retroknowledge</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#e023703f3460855264e8fbe327a7ed6a"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.retroknowledge"><span class="id" title="projection">retroknowledge</span></a>) |} |}<br/>
<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_wf"><span class="id" title="projection">reference_impl_wf</span></a>). <span class="id" title="var">sq</span>.<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">onu</span> <span class="id" title="var">ond</span>]; <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq_anonymous</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ond</span>.<br/>
<span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">ond</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="make_wf_env_ext" class="idref" href="#make_wf_env_ext"><span class="id" title="definition">make_wf_env_ext</span></a> {<a id="cf:27" class="idref" href="#cf:27"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:28" class="idref" href="#guard:28"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>}<br/>
(<a id="b45015ea779d7a6908b541de791ac941" class="idref" href="#b45015ea779d7a6908b541de791ac941"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl"><span class="id" title="record">reference_impl</span></a>) (<a id="univs:30" class="idref" href="#univs:30"><span class="id" title="binder">univs</span></a> : <a class="idref" href="MetaCoq.Common.Universes.html#universes_decl"><span class="id" title="inductive">universes_decl</span></a>)<br/>
(<a id="prf:32" class="idref" href="#prf:32"><span class="id" title="binder">prf</span></a> : <span class="id" title="keyword">∀</span> <a id="f2c22030c8978c829e401798951d3d29" class="idref" href="#f2c22030c8978c829e401798951d3d29"><span class="id" title="binder">Σ0</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>, <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#f2c22030c8978c829e401798951d3d29"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b45015ea779d7a6908b541de791ac941"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#f2c22030c8978c829e401798951d3d29"><span class="id" title="variable">Σ0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#univs:30"><span class="id" title="variable">univs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext"><span class="id" title="record">reference_impl_ext</span></a> :=<br/>
{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b45015ea779d7a6908b541de791ac941"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#univs:30"><span class="id" title="variable">univs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;|}.<br/>

<br/>
<span class="id" title="keyword">Program Global Instance</span> <a id="canonical_abstract_env_struct" class="idref" href="#canonical_abstract_env_struct"><span class="id" title="instance">canonical_abstract_env_struct</span></a> {<a id="cf:33" class="idref" href="#cf:33"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:34" class="idref" href="#guard:34"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_struct"><span class="id" title="class">abstract_env_struct</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl"><span class="id" title="record">reference_impl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext"><span class="id" title="record">reference_impl_ext</span></a> :=<br/>
&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_lookup"><span class="id" title="method">abstract_env_lookup</span></a> := <span class="id" title="keyword">fun</span> <a id="bee78f44e79dd1f39e7aa3afe03ef2db" class="idref" href="#bee78f44e79dd1f39e7aa3afe03ef2db"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#bee78f44e79dd1f39e7aa3afe03ef2db"><span class="id" title="variable">Σ</span></a>) ;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_leqb_level_n"><span class="id" title="method">abstract_env_leqb_level_n</span></a> := <span class="id" title="keyword">fun</span> <a id="7674e0ce7f4ec5e4ff169924724c4b41" class="idref" href="#7674e0ce7f4ec5e4ff169924724c4b41"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.Common.uGraph.html#leqb_level_n"><span class="id" title="definition">leqb_level_n</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext_graph"><span class="id" title="projection">reference_impl_ext_graph</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#7674e0ce7f4ec5e4ff169924724c4b41"><span class="id" title="variable">Σ</span></a>) ;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_level_mem"><span class="id" title="method">abstract_env_level_mem</span></a> := <span class="id" title="keyword">fun</span> <a id="2419f67097a80bf54d8cab0e41eb773a" class="idref" href="#2419f67097a80bf54d8cab0e41eb773a"><span class="id" title="binder">Σ</span></a> <a id="l:53" class="idref" href="#l:53"><span class="id" title="binder">l</span></a> ⇒ <a class="idref" href="MetaCoq.Common.Universes.html#LevelSet.mem"><span class="id" title="definition">LevelSet.mem</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#l:53"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_levels"><span class="id" title="definition">global_ext_levels</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#2419f67097a80bf54d8cab0e41eb773a"><span class="id" title="variable">Σ</span></a>));<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_guard"><span class="id" title="method">abstract_env_guard</span></a> := <span class="id" title="keyword">fun</span> <a id="f1e8fd5f016d0a22b08224b45bb8ae16" class="idref" href="#f1e8fd5f016d0a22b08224b45bb8ae16"><span class="id" title="binder">Σ</span></a> <a id="fix_cofix:56" class="idref" href="#fix_cofix:56"><span class="id" title="binder">fix_cofix</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#guard_impl"><span class="id" title="method">guard_impl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#fix_cofix:56"><span class="id" title="variable">fix_cofix</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#f1e8fd5f016d0a22b08224b45bb8ae16"><span class="id" title="variable">Σ</span></a>);<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_rel"><span class="id" title="method">abstract_env_ext_rel</span></a> := <span class="id" title="keyword">fun</span> <a id="X:37" class="idref" href="#X:37"><span class="id" title="binder">X</span></a> <a id="4419af43eee85446dd7b19942c9f830b" class="idref" href="#4419af43eee85446dd7b19942c9f830b"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#4419af43eee85446dd7b19942c9f830b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:37"><span class="id" title="variable">X</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_init"><span class="id" title="method">abstract_env_init</span></a> := <span class="id" title="keyword">fun</span> <a id="cs:39" class="idref" href="#cs:39"><span class="id" title="binder">cs</span></a> <a id="retro:40" class="idref" href="#retro:40"><span class="id" title="binder">retro</span></a> <a id="H:41" class="idref" href="#H:41"><span class="id" title="binder">H</span></a> ⇒  {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env"><span class="id" title="projection">reference_impl_env</span></a> := {| <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cs:39"><span class="id" title="variable">cs</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.retroknowledge"><span class="id" title="projection">retroknowledge</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#retro:40"><span class="id" title="variable">retro</span></a> |}; |} ;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_add_decl"><span class="id" title="method">abstract_env_add_decl</span></a> := <span class="id" title="keyword">fun</span> <a id="X:42" class="idref" href="#X:42"><span class="id" title="binder">X</span></a> <a id="kn:43" class="idref" href="#kn:43"><span class="id" title="binder">kn</span></a> <a id="d:44" class="idref" href="#d:44"><span class="id" title="binder">d</span></a> <a id="H:45" class="idref" href="#H:45"><span class="id" title="binder">H</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env"><span class="id" title="projection">reference_impl_env</span></a> := <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.add_global_decl"><span class="id" title="definition">add_global_decl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:42"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env"><span class="id" title="projection">reference_impl_env</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#kn:43"><span class="id" title="variable">kn</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:44"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>; |};<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_is_consistent"><span class="id" title="method">abstract_env_is_consistent</span></a> <a id="X:57" class="idref" href="#X:57"><span class="id" title="binder">X</span></a> <a id="uctx:58" class="idref" href="#uctx:58"><span class="id" title="binder">uctx</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="G:59" class="idref" href="#G:59"><span class="id" title="binder">G</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_graph"><span class="id" title="projection">reference_impl_graph</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:57"><span class="id" title="variable">X</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="G':60" class="idref" href="#G':60"><span class="id" title="binder">G'</span></a> := <a class="idref" href="MetaCoq.Common.uGraph.html#add_uctx"><span class="id" title="definition">add_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#uctx:58"><span class="id" title="variable">uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G:59"><span class="id" title="variable">G</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Common.uGraph.html#wGraph.is_acyclic"><span class="id" title="definition">wGraph.is_acyclic</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G':60"><span class="id" title="variable">G'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaCoq.Common.uGraph.html#wGraph.IsFullSubgraph.is_full_extension"><span class="id" title="definition">wGraph.IsFullSubgraph.is_full_extension</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G:59"><span class="id" title="variable">G</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G':60"><span class="id" title="variable">G'</span></a> ;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_add_udecl"><span class="id" title="method">abstract_env_add_udecl</span></a> <a id="X:46" class="idref" href="#X:46"><span class="id" title="binder">X</span></a> <a id="udecl:47" class="idref" href="#udecl:47"><span class="id" title="binder">udecl</span></a> <a id="Hglobal:48" class="idref" href="#Hglobal:48"><span class="id" title="binder">Hglobal</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:46"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env"><span class="id" title="projection">reference_impl_env</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#udecl:47"><span class="id" title="variable">udecl</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>; |} ;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_primitive_constant"><span class="id" title="method">abstract_primitive_constant</span></a> := <span class="id" title="keyword">fun</span> <a id="X:50" class="idref" href="#X:50"><span class="id" title="binder">X</span></a> <a id="tag:51" class="idref" href="#tag:51"><span class="id" title="binder">tag</span></a> ⇒ <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.primitive_constant"><span class="id" title="definition">primitive_constant</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:50"><span class="id" title="variable">X</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#tag:51"><span class="id" title="variable">tag</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_rel"><span class="id" title="method">abstract_env_rel</span></a> := <span class="id" title="keyword">fun</span> <a id="X:35" class="idref" href="#X:35"><span class="id" title="binder">X</span></a> <a id="06f02a2e1ae1dbc558fdd78ca814765d" class="idref" href="#06f02a2e1ae1dbc558fdd78ca814765d"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#06f02a2e1ae1dbc558fdd78ca814765d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env"><span class="id" title="projection">reference_impl_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:35"><span class="id" title="variable">X</span></a> ;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_pop_decls"><span class="id" title="method">abstract_pop_decls</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop"><span class="id" title="definition">reference_pop</span></a> ;<br/>
&nbsp;|}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">sq</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_wf"><span class="id" title="projection">reference_impl_wf</span></a> <span class="id" title="var">X</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;<span class="id" title="var">sq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_wf"><span class="id" title="projection">reference_impl_wf</span></a> <span class="id" title="var">X</span>). <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hglobal</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>); <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">econstructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;pack&nbsp;up&nbsp;all&nbsp;the&nbsp;information&nbsp;required&nbsp;on&nbsp;the&nbsp;global&nbsp;environment&nbsp;and&nbsp;graph&nbsp;in&nbsp;a<br/>
single&nbsp;record.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="wf_env" class="idref" href="#wf_env"><span class="id" title="record">wf_env</span></a> {<a id="cf:61" class="idref" href="#cf:61"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} := {<br/>
&nbsp;&nbsp;<a id="wf_env_reference" class="idref" href="#wf_env_reference"><span class="id" title="projection">wf_env_reference</span></a> :&gt; <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl"><span class="id" title="record">reference_impl</span></a>;<br/>
&nbsp;&nbsp;<a id="wf_env_map" class="idref" href="#wf_env_map"><span class="id" title="projection">wf_env_map</span></a> :&gt; <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.t"><span class="id" title="definition">EnvMap.t</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_decl"><span class="id" title="inductive">global_decl</span></a>;<br/>
&nbsp;&nbsp;<a id="wf_env_map_repr" class="idref" href="#wf_env_map_repr"><span class="id" title="projection">wf_env_map_repr</span></a> :&gt; <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.repr"><span class="id" title="definition">EnvMap.repr</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env"><span class="id" title="projection">reference_impl_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_reference:63"><span class="id" title="method">wf_env_reference</span></a>).(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map:64"><span class="id" title="method">wf_env_map</span></a>;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="wf_env_ext" class="idref" href="#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a> {<a id="cf:66" class="idref" href="#cf:66"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:67" class="idref" href="#guard:67"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} := {<br/>
&nbsp;&nbsp;<a id="wf_env_ext_reference" class="idref" href="#wf_env_ext_reference"><span class="id" title="projection">wf_env_ext_reference</span></a> :&gt; <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext"><span class="id" title="record">reference_impl_ext</span></a>;<br/>
&nbsp;&nbsp;<a id="wf_env_ext_map" class="idref" href="#wf_env_ext_map"><span class="id" title="projection">wf_env_ext_map</span></a> :&gt; <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.t"><span class="id" title="definition">EnvMap.t</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_decl"><span class="id" title="inductive">global_decl</span></a>;<br/>
&nbsp;&nbsp;<a id="wf_env_ext_map_repr" class="idref" href="#wf_env_ext_map_repr"><span class="id" title="projection">wf_env_ext_map_repr</span></a> :&gt; <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.repr"><span class="id" title="definition">EnvMap.repr</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_reference:69"><span class="id" title="method">wf_env_ext_reference</span></a>).(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map:70"><span class="id" title="method">wf_env_ext_map</span></a>;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_env_eta" class="idref" href="#wf_env_eta"><span class="id" title="lemma">wf_env_eta</span></a> {<a id="cf:72" class="idref" href="#cf:72"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="6326b77571469372847db81b20e33788" class="idref" href="#6326b77571469372847db81b20e33788"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a>) :<br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">{|</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#6326b77571469372847db81b20e33788"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a>); <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#6326b77571469372847db81b20e33788"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>); <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.retroknowledge"><span class="id" title="projection">retroknowledge</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#6326b77571469372847db81b20e33788"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.retroknowledge"><span class="id" title="projection">retroknowledge</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#6326b77571469372847db81b20e33788"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> ⇒ /= //. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env"><span class="id" title="projection">reference_impl_env</span></a> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_fresh_globals" class="idref" href="#wf_fresh_globals"><span class="id" title="lemma">wf_fresh_globals</span></a> {<a id="cf:74" class="idref" href="#cf:74"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} <a id="5e616d60b6019fd1fcdddd9ee38e237a" class="idref" href="#5e616d60b6019fd1fcdddd9ee38e237a"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#5e616d60b6019fd1fcdddd9ee38e237a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.fresh_globals"><span class="id" title="inductive">EnvMap.fresh_globals</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#5e616d60b6019fd1fcdddd9ee38e237a"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">univs</span> <span class="id" title="var">Σ</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ [] <span class="id" title="var">onu</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_env_fresh" class="idref" href="#wf_env_fresh"><span class="id" title="lemma">wf_env_fresh</span></a> {<a id="cf:76" class="idref" href="#cf:76"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="15bb1c35edab98229a8cfae9c0763c1a" class="idref" href="#15bb1c35edab98229a8cfae9c0763c1a"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a>) : <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.fresh_globals"><span class="id" title="inductive">EnvMap.EnvMap.fresh_globals</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#15bb1c35edab98229a8cfae9c0763c1a"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_wf"><span class="id" title="projection">reference_impl_wf</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_fresh_globals"><span class="id" title="lemma">wf_fresh_globals</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="of_global_env_cons" class="idref" href="#of_global_env_cons"><span class="id" title="lemma">of_global_env_cons</span></a> {<a id="cf:78" class="idref" href="#cf:78"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} <a id="d:79" class="idref" href="#d:79"><span class="id" title="binder">d</span></a> <a id="g:80" class="idref" href="#g:80"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.fresh_globals"><span class="id" title="inductive">EnvMap.fresh_globals</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.add_global_decl"><span class="id" title="definition">add_global_decl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#g:80"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:79"><span class="id" title="variable">d</span></a>).(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.of_global_env"><span class="id" title="definition">EnvMap.of_global_env</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.add_global_decl"><span class="id" title="definition">add_global_decl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#g:80"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:79"><span class="id" title="variable">d</span></a>).(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.add"><span class="id" title="definition">EnvMap.add</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:79"><span class="id" title="variable">d</span></a><a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:79"><span class="id" title="variable">d</span></a><a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.of_global_env"><span class="id" title="definition">EnvMap.of_global_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#g:80"><span class="id" title="variable">g</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.of_global_env"><span class="id" title="definition">EnvMap.of_global_env</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.Kernames.html#KernameMapFact.uncurry"><span class="id" title="definition">KernameMapFact.uncurry</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="wf_env_init" class="idref" href="#wf_env_init"><span class="id" title="definition">wf_env_init</span></a> {<a id="cf:81" class="idref" href="#cf:81"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:82" class="idref" href="#guard:82"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} <a id="cs:83" class="idref" href="#cs:83"><span class="id" title="binder">cs</span></a> <a id="retro:84" class="idref" href="#retro:84"><span class="id" title="binder">retro</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#on_global_univs"><span class="id" title="definition">on_global_univs</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cs:83"><span class="id" title="variable">cs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a> := <span class="id" title="keyword">fun</span> <a id="H:85" class="idref" href="#H:85"><span class="id" title="binder">H</span></a> ⇒<br/>
&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_reference"><span class="id" title="projection">wf_env_reference</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_init"><span class="id" title="method">abstract_env_init</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cs:83"><span class="id" title="variable">cs</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#retro:84"><span class="id" title="variable">retro</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#H:85"><span class="id" title="variable">H</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a> := <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.empty"><span class="id" title="definition">EnvMap.empty</span></a>;<br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="reference_pop_decls_correct" class="idref" href="#reference_pop_decls_correct"><span class="id" title="lemma">reference_pop_decls_correct</span></a> {<a id="cf:86" class="idref" href="#cf:86"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="X:87" class="idref" href="#X:87"><span class="id" title="binder">X</span></a>:<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl"><span class="id" title="record">reference_impl</span></a>) <a id="decls:88" class="idref" href="#decls:88"><span class="id" title="binder">decls</span></a><br/>
&nbsp;&nbsp;(<a id="prf:91" class="idref" href="#prf:91"><span class="id" title="binder">prf</span></a> : <span class="id" title="keyword">∀</span> <a id="c51b7ec861f7c17647e5cb8afff8d01c" class="idref" href="#c51b7ec861f7c17647e5cb8afff8d01c"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>, <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c51b7ec861f7c17647e5cb8afff8d01c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:87"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="d:90" class="idref" href="#d:90"><span class="id" title="binder">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c51b7ec861f7c17647e5cb8afff8d01c"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:90"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#decls:88"><span class="id" title="variable">decls</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="X':92" class="idref" href="#X':92"><span class="id" title="binder">X'</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop"><span class="id" title="definition">reference_pop</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:87"><span class="id" title="variable">X</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="fc189c80b71ecc5231145e0c7fc7178c" class="idref" href="#fc189c80b71ecc5231145e0c7fc7178c"><span class="id" title="binder">Σ</span></a> <a id="2e9d20366b525f6203bee8eff261e351" class="idref" href="#2e9d20366b525f6203bee8eff261e351"><span class="id" title="binder">Σ'</span></a>, <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#fc189c80b71ecc5231145e0c7fc7178c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:87"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#2e9d20366b525f6203bee8eff261e351"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X':92"><span class="id" title="variable">X'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#2e9d20366b525f6203bee8eff261e351"><span class="id" title="variable">Σ'</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#decls:88"><span class="id" title="variable">decls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#fc189c80b71ecc5231145e0c7fc7178c"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#2e9d20366b525f6203bee8eff261e351"><span class="id" title="variable">Σ'</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#fc189c80b71ecc5231145e0c7fc7178c"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.retroknowledge"><span class="id" title="projection">retroknowledge</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#2e9d20366b525f6203bee8eff261e351"><span class="id" title="variable">Σ'</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.retroknowledge"><span class="id" title="projection">retroknowledge</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">prf</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop"><span class="id" title="definition">reference_pop</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">set</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop_obligation_1"><span class="id" title="lemma">reference_pop_obligation_1</span></a> <span class="id" title="var">cf</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">X</span>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>)); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">prf</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="optim_pop" class="idref" href="#optim_pop"><span class="id" title="definition">optim_pop</span></a> {<a id="cf:95" class="idref" href="#cf:95"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="cd6537d2e99017ef8ef9bcdef499a786" class="idref" href="#cd6537d2e99017ef8ef9bcdef499a786"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a>) : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cd6537d2e99017ef8ef9bcdef499a786"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env"><span class="id" title="projection">reference_impl_env</span></a>).(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cd6537d2e99017ef8ef9bcdef499a786"><span class="id" title="variable">Σ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">decls</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_reference"><span class="id" title="projection">wf_env_reference</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop"><span class="id" title="definition">reference_pop</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cd6537d2e99017ef8ef9bcdef499a786"><span class="id" title="variable">Σ</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a> := <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.remove"><span class="id" title="definition">EnvMap.EnvMap.remove</span></a> <span class="id" title="var">kn</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cd6537d2e99017ef8ef9bcdef499a786"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Σ</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map_repr"><span class="id" title="projection">wf_env_map_repr</span></a>). <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq_anonymous</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Σ0</span> := <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.of_global_env"><span class="id" title="definition">EnvMap.of_global_env</span></a> <span class="id" title="var">decls</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.remove_add_eq"><span class="id" title="lemma">EnvMap.remove_add_eq</span></a> <span class="id" title="var">decls</span> <span class="id" title="var">kn</span> <span class="id" title="var">d</span> <span class="id" title="var">Σ0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">PCUICSR.forward_keep</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Σf</span> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_fresh"><span class="id" title="lemma">wf_env_fresh</span></a> <span class="id" title="var">Σ</span>). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq_anonymous</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Σf</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">Σf</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">PCUICSR.forward_keep</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Σf</span> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_fresh"><span class="id" title="lemma">wf_env_fresh</span></a> <span class="id" title="var">Σ</span>). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq_anonymous</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Σf</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">Σf</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">PCUICSR.forward_keep</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">red</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.equal"><span class="id" title="definition">EnvMap.equal</span></a>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.repr"><span class="id" title="definition">EnvMap.repr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> /=. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.Kernames.html#KernameMapFact.uncurry"><span class="id" title="definition">KernameMapFact.uncurry</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.add"><span class="id" title="definition">EnvMap.add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop"><span class="id" title="definition">reference_pop</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">set</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop_obligation_1"><span class="id" title="lemma">reference_pop_obligation_1</span></a> <span class="id" title="var">cf</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> <span class="id" title="var">Σ</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq_anonymous</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq_anonymous</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.Kernames.html#KernameMapFact.uncurry"><span class="id" title="definition">KernameMapFact.uncurry</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Σ0</span> <span class="id" title="tactic">in</span> × ; <span class="id" title="tactic">clear</span> <span class="id" title="var">Σ0</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.equal"><span class="id" title="definition">EnvMap.equal</span></a>, <a class="idref" href="MetaCoq.Common.Kernames.html#KernameMap.Equal"><span class="id" title="definition">KernameMap.Equal</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">y</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Program Global Instance</span> <a id="optimized_abstract_env_struct" class="idref" href="#optimized_abstract_env_struct"><span class="id" title="instance">optimized_abstract_env_struct</span></a> {<a id="cf:97" class="idref" href="#cf:97"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:98" class="idref" href="#guard:98"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_struct"><span class="id" title="class">abstract_env_struct</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a> :=<br/>
&nbsp;{|<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_lookup"><span class="id" title="method">abstract_env_lookup</span></a> := <span class="id" title="keyword">fun</span> <a id="bf64b8ca86999443d40a34bdbbcf8d7f" class="idref" href="#bf64b8ca86999443d40a34bdbbcf8d7f"><span class="id" title="binder">Σ</span></a> <a id="k:109" class="idref" href="#k:109"><span class="id" title="binder">k</span></a> ⇒ <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.lookup"><span class="id" title="definition">EnvMap.lookup</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#k:109"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map"><span class="id" title="projection">wf_env_ext_map</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#bf64b8ca86999443d40a34bdbbcf8d7f"><span class="id" title="variable">Σ</span></a>);<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_leqb_level_n"><span class="id" title="method">abstract_env_leqb_level_n</span></a> <a id="X:112" class="idref" href="#X:112"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_leqb_level_n"><span class="id" title="method">abstract_env_leqb_level_n</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:112"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_reference"><span class="id" title="projection">wf_env_ext_reference</span></a>);<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_level_mem"><span class="id" title="method">abstract_env_level_mem</span></a> <a id="X:111" class="idref" href="#X:111"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_level_mem"><span class="id" title="method">abstract_env_level_mem</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:111"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_reference"><span class="id" title="projection">wf_env_ext_reference</span></a>);<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_guard"><span class="id" title="method">abstract_env_guard</span></a> := <span class="id" title="keyword">fun</span> <a id="67028e5db0d7f321f964117e73116fa2" class="idref" href="#67028e5db0d7f321f964117e73116fa2"><span class="id" title="binder">Σ</span></a> <a id="fix_cofix:114" class="idref" href="#fix_cofix:114"><span class="id" title="binder">fix_cofix</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#guard_impl"><span class="id" title="method">guard_impl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#fix_cofix:114"><span class="id" title="variable">fix_cofix</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_reference"><span class="id" title="projection">wf_env_ext_reference</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#67028e5db0d7f321f964117e73116fa2"><span class="id" title="variable">Σ</span></a>);<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_rel"><span class="id" title="method">abstract_env_ext_rel</span></a> <a id="X:100" class="idref" href="#X:100"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_rel"><span class="id" title="method">abstract_env_ext_rel</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:100"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_reference"><span class="id" title="projection">wf_env_ext_reference</span></a>);<br/>
<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_init"><span class="id" title="method">abstract_env_init</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_init"><span class="id" title="definition">wf_env_init</span></a>;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_add_decl"><span class="id" title="method">abstract_env_add_decl</span></a> <a id="X:101" class="idref" href="#X:101"><span class="id" title="binder">X</span></a> <a id="kn:102" class="idref" href="#kn:102"><span class="id" title="binder">kn</span></a> <a id="d:103" class="idref" href="#d:103"><span class="id" title="binder">d</span></a> <a id="H:104" class="idref" href="#H:104"><span class="id" title="binder">H</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_reference"><span class="id" title="projection">wf_env_reference</span></a> := @<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_add_decl"><span class="id" title="method">abstract_env_add_decl</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext"><span class="id" title="record">reference_impl_ext</span></a> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:101"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_reference"><span class="id" title="projection">wf_env_reference</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#kn:102"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:103"><span class="id" title="variable">d</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#H:104"><span class="id" title="variable">H</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a> := <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.add"><span class="id" title="definition">EnvMap.add</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#kn:102"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:103"><span class="id" title="variable">d</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:101"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a>) |};<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_is_consistent"><span class="id" title="method">abstract_env_is_consistent</span></a> <a id="X:115" class="idref" href="#X:115"><span class="id" title="binder">X</span></a> <a id="uctx:116" class="idref" href="#uctx:116"><span class="id" title="binder">uctx</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_is_consistent"><span class="id" title="method">abstract_env_is_consistent</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:115"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_reference"><span class="id" title="projection">wf_env_reference</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#uctx:116"><span class="id" title="variable">uctx</span></a>;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_add_udecl"><span class="id" title="method">abstract_env_add_udecl</span></a> <a id="X:105" class="idref" href="#X:105"><span class="id" title="binder">X</span></a> <a id="udecl:106" class="idref" href="#udecl:106"><span class="id" title="binder">udecl</span></a> <a id="Hdecl:107" class="idref" href="#Hdecl:107"><span class="id" title="binder">Hdecl</span></a> :=<br/>
&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_reference"><span class="id" title="projection">wf_env_ext_reference</span></a> := @<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_add_udecl"><span class="id" title="method">abstract_env_add_udecl</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext"><span class="id" title="record">reference_impl_ext</span></a> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:105"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_reference"><span class="id" title="projection">wf_env_reference</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#udecl:106"><span class="id" title="variable">udecl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#Hdecl:107"><span class="id" title="variable">Hdecl</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map"><span class="id" title="projection">wf_env_ext_map</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:105"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a>) |};<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_primitive_constant"><span class="id" title="method">abstract_primitive_constant</span></a> <a id="X:110" class="idref" href="#X:110"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_primitive_constant"><span class="id" title="method">abstract_primitive_constant</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:110"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_reference"><span class="id" title="projection">wf_env_ext_reference</span></a>);<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_rel"><span class="id" title="method">abstract_env_rel</span></a> <a id="X:99" class="idref" href="#X:99"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_rel"><span class="id" title="method">abstract_env_rel</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:99"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_reference"><span class="id" title="projection">wf_env_reference</span></a>) ;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_pop_decls"><span class="id" title="method">abstract_pop_decls</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optim_pop"><span class="id" title="definition">optim_pop</span></a> ;<br/>
&nbsp;|}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">X</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_reference"><span class="id" title="projection">wf_env_reference</span></a>).(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_wf"><span class="id" title="projection">reference_impl_wf</span></a>)) <span class="id" title="keyword">as</span> [?].<br/>
&nbsp;&nbsp;<span class="id" title="var">sq</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.repr_add"><span class="id" title="lemma">EnvMap.repr_add</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_fresh_globals"><span class="id" title="lemma">wf_fresh_globals</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map_repr"><span class="id" title="projection">wf_env_map_repr</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map_repr"><span class="id" title="projection">wf_env_map_repr</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="WfEnv" class="idref" href="#WfEnv"><span class="id" title="section">WfEnv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="cf:117" class="idref" href="#cf:117"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:118" class="idref" href="#guard:118"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="reference_impl_sq_wf" class="idref" href="#reference_impl_sq_wf"><span class="id" title="definition">reference_impl_sq_wf</span></a> (<a id="a24658b2adcc01e6c41a8c2c40c17df4" class="idref" href="#a24658b2adcc01e6c41a8c2c40c17df4"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext"><span class="id" title="record">reference_impl_ext</span></a>) : <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a24658b2adcc01e6c41a8c2c40c17df4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext_wf"><span class="id" title="projection">reference_impl_ext_wf</span></a> <span class="id" title="var">Σ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lookup" class="idref" href="#lookup"><span class="id" title="definition">lookup</span></a> (<a id="3f8c1c10906746294e3c27001291be1f" class="idref" href="#3f8c1c10906746294e3c27001291be1f"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a>) (<a id="kn:121" class="idref" href="#kn:121"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaCoq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_decl"><span class="id" title="inductive">global_decl</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.lookup"><span class="id" title="definition">EnvMap.lookup</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#kn:121"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#3f8c1c10906746294e3c27001291be1f"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map"><span class="id" title="projection">wf_env_ext_map</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lookup_lookup_env" class="idref" href="#lookup_lookup_env"><span class="id" title="lemma">lookup_lookup_env</span></a> <a id="89c991e573d576d4ce9b4ce8f6af8d89" class="idref" href="#89c991e573d576d4ce9b4ce8f6af8d89"><span class="id" title="binder">Σ</span></a> <a id="kn:123" class="idref" href="#kn:123"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#89c991e573d576d4ce9b4ce8f6af8d89"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#kn:123"><span class="id" title="variable">kn</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#89c991e573d576d4ce9b4ce8f6af8d89"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#kn:123"><span class="id" title="variable">kn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#lookup"><span class="id" title="definition">lookup</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">map</span> <span class="id" title="var">repr</span>]. <span class="id" title="tactic">pose</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_sq_wf"><span class="id" title="definition">reference_impl_sq_wf</span></a> <span class="id" title="var">Σ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.lookup_spec"><span class="id" title="lemma">EnvMap.lookup_spec</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_fresh_globals"><span class="id" title="lemma">wf_fresh_globals</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#WfEnv"><span class="id" title="section">WfEnv</span></a>.<br/>

<br/>
<span class="id" title="keyword">Create HintDb</span> <span class="id" title="var">wf_env</span> <span class="id" title="var">discriminated</span>.<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Hint</span> <span class="id" title="var">Constants</span> <span class="id" title="keyword">Opaque</span> : <span class="id" title="var">wf_env</span>.<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Variables</span> <span class="id" title="keyword">Opaque</span> : <span class="id" title="var">wf_env</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">reference_impl_ext_wf</span> : <span class="id" title="var">wf_env</span>.<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">reference_impl_wf</span> : <span class="id" title="var">wf_env</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="60741ce1afc60d6333387ca49e214dc0" class="idref" href="#60741ce1afc60d6333387ca49e214dc0"><span class="id" title="definition">Σudecl_ref</span></a> {<a id="cf:124" class="idref" href="#cf:124"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:125" class="idref" href="#guard:125"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="8475528fc27833cff18e277488ae9e00" class="idref" href="#8475528fc27833cff18e277488ae9e00"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext"><span class="id" title="record">reference_impl_ext</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#on_udecl"><span class="id" title="definition">on_udecl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#8475528fc27833cff18e277488ae9e00"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a>)<a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#8475528fc27833cff18e277488ae9e00"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a>)<a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Utils.MCSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<span class="id" title="keyword">fun</span> <a id="x:127" class="idref" href="#x:127"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#x:127"><span class="id" title="variable">x</span></a><a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#8475528fc27833cff18e277488ae9e00"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="01940b9990bcd09b0c63884b8fe04517" class="idref" href="#01940b9990bcd09b0c63884b8fe04517"><span class="id" title="definition">Σudecl</span></a> {<a id="cf:128" class="idref" href="#cf:128"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:129" class="idref" href="#guard:129"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="ac561eb9930a784cc140305591fb82e6" class="idref" href="#ac561eb9930a784cc140305591fb82e6"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#on_udecl"><span class="id" title="definition">on_udecl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#ac561eb9930a784cc140305591fb82e6"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a>)<a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#ac561eb9930a784cc140305591fb82e6"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a>)<a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Utils.MCSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<span class="id" title="keyword">fun</span> <a id="x:131" class="idref" href="#x:131"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#x:131"><span class="id" title="variable">x</span></a><a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#ac561eb9930a784cc140305591fb82e6"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">Σudecl</span> : <span class="id" title="var">wf_env</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">wf_env</span> := <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">wf_env</span>.<br/>

<br/>
</div>

<div class="doc">
Build an optimized environment representation for lookups along with the graph associated to a well-formed
  global environment. The graph building is separated, so that <span class="inlinecode">(<span class="id" title="var">build_wf_env_ext</span></span> <span class="inlinecode"><span class="id" title="var">Σ</span></span> <span class="inlinecode"><span class="id" title="var">wfΣ</span>).(<span class="id" title="var">wf_env_ext_env</span>)</span> is
  convertible to <span class="inlinecode"><span class="id" title="var">Σ</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="build_wf_env_ext" class="idref" href="#build_wf_env_ext"><span class="id" title="definition">build_wf_env_ext</span></a> {<a id="cf:132" class="idref" href="#cf:132"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:133" class="idref" href="#guard:133"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="c58622cdefcec1fabde0203fafbe0044" class="idref" href="#c58622cdefcec1fabde0203fafbe0044"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) (<a id="b75c55659b5420de7a98d44b84231cd7" class="idref" href="#b75c55659b5420de7a98d44b84231cd7"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c58622cdefcec1fabde0203fafbe0044"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_reference"><span class="id" title="projection">wf_env_ext_reference</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c58622cdefcec1fabde0203fafbe0044"><span class="id" title="variable">Σ</span></a>; <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext_wf"><span class="id" title="projection">reference_impl_ext_wf</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b75c55659b5420de7a98d44b84231cd7"><span class="id" title="variable">wfΣ</span></a> |} ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map"><span class="id" title="projection">wf_env_ext_map</span></a> := <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.of_global_env"><span class="id" title="definition">EnvMap.of_global_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c58622cdefcec1fabde0203fafbe0044"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map_repr"><span class="id" title="projection">wf_env_ext_map_repr</span></a> := <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.repr_global_env"><span class="id" title="lemma">EnvMap.repr_global_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c58622cdefcec1fabde0203fafbe0044"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>);<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="GraphSpec" class="idref" href="#GraphSpec"><span class="id" title="section">GraphSpec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="cf:136" class="idref" href="#cf:136"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:137" class="idref" href="#guard:137"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} {<a id="1bd0898eaee20c159296788819298653" class="idref" href="#1bd0898eaee20c159296788819298653"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} (<a id="13d0f4a622f9f2911e5f0c4ddd123e3f" class="idref" href="#13d0f4a622f9f2911e5f0c4ddd123e3f"><span class="id" title="binder">HΣ</span></a> : <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#1bd0898eaee20c159296788819298653"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c8fecf24bf5bcd8d1d2684af9606fd10" class="idref" href="#c8fecf24bf5bcd8d1d2684af9606fd10"><span class="id" title="binder">H</span></a><a id="c8fecf24bf5bcd8d1d2684af9606fd10" class="idref" href="#c8fecf24bf5bcd8d1d2684af9606fd10"><span class="id" title="binder">φ</span></a> : <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#on_udecl"><span class="id" title="definition">on_udecl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#1bd0898eaee20c159296788819298653"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#1bd0898eaee20c159296788819298653"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="G:141" class="idref" href="#G:141"><span class="id" title="binder">G</span></a> : <a class="idref" href="MetaCoq.Common.uGraph.html#universes_graph"><span class="id" title="definition">universes_graph</span></a>) (<a id="HG:142" class="idref" href="#HG:142"><span class="id" title="binder">HG</span></a> : <a class="idref" href="MetaCoq.Common.uGraph.html#is_graph_of_uctx"><span class="id" title="definition">is_graph_of_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G:141"><span class="id" title="variable">G</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#1bd0898eaee20c159296788819298653"><span class="id" title="variable">Σ</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <a id="8bebae1adb9ff7f367ce0ade63a93c16" class="idref" href="#8bebae1adb9ff7f367ce0ade63a93c16"><span class="id" title="definition">HΣ'</span></a> : <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#22df98beaa5c9b73b2e1607081fb8d15"><span class="id" title="variable">HΣ</span></a>, <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#4b50f4dd05cb3d345eb8596bfac3a701"><span class="id" title="variable">H</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#4b50f4dd05cb3d345eb8596bfac3a701"><span class="id" title="variable">φ</span></a>; <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="is_graph_of_uctx_levels" class="idref" href="#is_graph_of_uctx_levels"><span class="id" title="lemma">is_graph_of_uctx_levels</span></a> (<a id="l:143" class="idref" href="#l:143"><span class="id" title="binder">l</span></a> : <a class="idref" href="MetaCoq.Common.Universes.html#Level.t"><span class="id" title="definition">Level.t</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Common.Universes.html#LevelSet.mem"><span class="id" title="definition">LevelSet.mem</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#l:143"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaCoq.Common.uGraph.html#wGraph.V"><span class="id" title="definition">uGraph.wGraph.V</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#GraphSpec.G"><span class="id" title="variable">G</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Common.Universes.html#LevelSet.mem"><span class="id" title="definition">LevelSet.mem</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#l:143"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_levels"><span class="id" title="definition">global_ext_levels</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">HG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.uGraph.html#is_graph_of_uctx"><span class="id" title="definition">is_graph_of_uctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_eq</span> (<a class="idref" href="MetaCoq.Common.uGraph.html#gc_of_uctx"><span class="id" title="definition">gc_of_uctx</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a>)); [<span class="id" title="tactic">intros</span> [<span class="id" title="var">lvs</span> <span class="id" title="var">cts</span>] <span class="id" title="var">XX</span>|<span class="id" title="tactic">intro</span> <span class="id" title="var">XX</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <span class="id" title="var">XX</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; [|<span class="id" title="var">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.uGraph.html#gc_of_uctx"><span class="id" title="definition">gc_of_uctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">XX</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">XX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.Common.uGraph.html#gc_of_constraints"><span class="id" title="definition">gc_of_constraints</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a>); [|<span class="id" title="tactic">discriminate</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">XX</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaCoq.Common.Universes.html#LevelSet.mem_spec"><span class="id" title="lemma">LevelSet.mem_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#GraphSpec.HG"><span class="id" title="variable">HG</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#GraphSpec"><span class="id" title="section">GraphSpec</span></a>.<br/>

<br/>
<span class="id" title="keyword">Program Global Instance</span> <a id="canonical_abstract_env_prop" class="idref" href="#canonical_abstract_env_prop"><span class="id" title="instance">canonical_abstract_env_prop</span></a> {<a id="cf:144" class="idref" href="#cf:144"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:145" class="idref" href="#guard:145"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :<br/>
&nbsp;&nbsp;@<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_prop"><span class="id" title="class">abstract_env_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#canonical_abstract_env_struct"><span class="id" title="instance">canonical_abstract_env_struct</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_exists"><span class="id" title="method">abstract_env_ext_exists</span></a> := <span class="id" title="keyword">fun</span> <a id="2c4158be8aa7e2838abd7fadbabfa578" class="idref" href="#2c4158be8aa7e2838abd7fadbabfa578"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.Utils.MCSquash.html#sq"><span class="id" title="constructor">sq</span></a> <a class="idref" href="MetaCoq.Utils.MCPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#2c4158be8aa7e2838abd7fadbabfa578"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Utils.MCPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a><a class="idref" href="MetaCoq.Utils.MCPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a>; |}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">wf_env</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="var">sq</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">wf_env</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">split</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop_decls_correct"><span class="id" title="lemma">reference_pop_decls_correct</span></a> <span class="id" title="var">X</span> <span class="id" title="var">decls</span> <span class="id" title="var">prf</span> <span class="id" title="var">X</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop"><span class="id" title="definition">reference_pop</span></a> <span class="id" title="var">X</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">HΣ</span> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext_wf"><span class="id" title="projection">reference_impl_ext_wf</span></a> <span class="id" title="var">X</span>). <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_global_Some_iff_In_NoDup"><span class="id" title="lemma">lookup_global_Some_iff_In_NoDup</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HΣ</span> <span class="id" title="keyword">as</span> [[] <span class="id" title="var">_</span>]. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#NoDup_on_global_decls"><span class="id" title="lemma">NoDup_on_global_decls</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext_wf"><span class="id" title="projection">reference_impl_ext_wf</span></a> <span class="id" title="var">X</span>); <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">uctx</span> := <a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#wf_ext_gc_of_uctx"><span class="id" title="lemma">wf_ext_gc_of_uctx</span></a> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">uctx</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">lc</span> <span class="id" title="var">ctrs</span>] <span class="id" title="var">Huctx</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaCoq.Common.Universes.html#consistent"><span class="id" title="definition">consistent</span></a> <a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <span class="id" title="var">X</span><a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">HC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">sq</span>; <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#global_ext_uctx_consistent"><span class="id" title="definition">global_ext_uctx_consistent</span></a> <span class="id" title="var">_</span> <span class="id" title="var">H</span>). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HC</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Common.uGraph.html#gc_consistent_iff"><span class="id" title="lemma">gc_consistent_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HC</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.Common.uGraph.html#leqb_level_n_spec"><span class="id" title="lemma">leqb_level_n_spec</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.Common.uGraph.html#gc_of_uctx_invariants"><span class="id" title="lemma">gc_of_uctx_invariants</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#wf_ext_global_uctx_invariants"><span class="id" title="definition">wf_ext_global_uctx_invariants</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hl'</span>. <span class="id" title="keyword">Opaque</span> <a class="idref" href="MetaCoq.Common.uGraph.html#gc_of_constraints"><span class="id" title="definition">gc_of_constraints</span></a>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="keyword">Transparent</span> <a class="idref" href="MetaCoq.Common.uGraph.html#gc_of_constraints"><span class="id" title="definition">gc_of_constraints</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.Common.uGraph.html#gc_of_constraints"><span class="id" title="definition">gc_of_constraints</span></a> <span class="id" title="var">X</span>); <span class="id" title="tactic">inversion</span> <span class="id" title="var">Huctx</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext_graph"><span class="id" title="projection">reference_impl_ext_graph</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">G</span> := <a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#graph_of_wf_ext"><span class="id" title="lemma">graph_of_wf_ext</span></a> <span class="id" title="var">_</span>); <span class="id" title="tactic">destruct</span> <span class="id" title="var">G</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">G</span> <span class="id" title="var">HG</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Common.uGraph.html#is_graph_of_uctx"><span class="id" title="definition">is_graph_of_uctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HG</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Huctx</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HG</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">pose</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext_wf"><span class="id" title="projection">reference_impl_ext_wf</span></a> <span class="id" title="var">X</span>). <span class="id" title="var">sq</span>. <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Common.Universes.html#LevelSet.Raw.mem_spec"><span class="id" title="lemma">LevelSet.Raw.mem_spec</span></a>. <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_wf"><span class="id" title="projection">reference_impl_wf</span></a> <span class="id" title="var">X</span>). <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">Hudecl</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H1</span> <span class="id" title="var">into</span> <span class="id" title="var">Hudecl'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H0</span> : <a class="idref" href="MetaCoq.Common.uGraph.html#global_uctx_invariants"><span class="id" title="class">global_uctx_invariants</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_uctx"><span class="id" title="definition">global_uctx</span></a> <span class="id" title="var">X</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#wf_global_uctx_invariants"><span class="id" title="definition">wf_global_uctx_invariants</span></a>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">udecl</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">t</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H1</span> : <a class="idref" href="MetaCoq.Common.uGraph.html#global_uctx_invariants"><span class="id" title="class">global_uctx_invariants</span></a> (<a class="idref" href="MetaCoq.Common.Universes.html#ContextSet.union"><span class="id" title="definition">ContextSet.union</span></a> <span class="id" title="var">udecl</span> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_uctx"><span class="id" title="definition">global_uctx</span></a> <span class="id" title="var">X</span>))).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Common.Universes.html#LevelSet.union_spec"><span class="id" title="lemma">LevelSet.union_spec</span></a>; <span class="id" title="tactic">right</span> ; <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [[<span class="id" title="var">l</span> <span class="id" title="var">ct</span>] <span class="id" title="var">l'</span>] [<span class="id" title="var">Hl</span>|<span class="id" title="var">Hl</span>]%<a class="idref" href="MetaCoq.Common.Universes.html#CS.union_spec"><span class="id" title="lemma">CS.union_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hudecl</span> <span class="id" title="var">_</span> <span class="id" title="var">Hl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">H0</span>]. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">_</span> <span class="id" title="var">Hl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Common.Universes.html#LevelSet.union_spec"><span class="id" title="lemma">LevelSet.union_spec</span></a>; <span class="id" title="tactic">right</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_graph"><span class="id" title="projection">reference_impl_graph</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Utils.MCProd.html#andb_and"><span class="id" title="lemma">andb_and</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_graph_wf"><span class="id" title="projection">reference_impl_graph_wf</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">gph</span> := <a class="idref" href="MetaCoq.Utils.MCPrelude.html#9068efa82fa7bcf30341b045859b1c5b"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#graph_of_wf"><span class="id" title="lemma">graph_of_wf</span></a> <span class="id" title="var">X</span><a class="idref" href="MetaCoq.Utils.MCPrelude.html#9068efa82fa7bcf30341b045859b1c5b"><span class="id" title="notation">).π1</span></a>) <span class="id" title="tactic">in</span> ×. <span class="id" title="var">clearbody</span> <span class="id" title="var">gph</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">HG'</span> := <a class="idref" href="MetaCoq.Common.uGraph.html#is_graph_of_uctx_add"><span class="id" title="lemma">is_graph_of_uctx_add</span></a> <span class="id" title="var">Hudecl'</span> <span class="id" title="var">HG</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">global_ext_uctx</span> := <a class="idref" href="MetaCoq.Common.Universes.html#ContextSet.union"><span class="id" title="definition">ContextSet.union</span></a> <span class="id" title="var">udecl</span> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_uctx"><span class="id" title="definition">global_uctx</span></a> <span class="id" title="var">X</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#wf_consistent_extension_on_consistent"><span class="id" title="lemma">wf_consistent_extension_on_consistent</span></a> <span class="id" title="var">udecl</span><a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">reorder</span> : <span class="id" title="keyword">∀</span> <a id="a:151" class="idref" href="#a:151"><span class="id" title="binder">a</span></a> <a id="a':152" class="idref" href="#a':152"><span class="id" title="binder">a'</span></a> <a id="b:153" class="idref" href="#b:153"><span class="id" title="binder">b</span></a> <a id="c:154" class="idref" href="#c:154"><span class="id" title="binder">c</span></a> : <span class="id" title="keyword">Prop</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b:149"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a:147"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a:147"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b:149"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a':148"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c:150"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b:149"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a':148"><span class="id" title="variable">a'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c:150"><span class="id" title="variable">c</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">reorder</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">eassumption</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">reorder</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> - (<a class="idref" href="MetaCoq.Common.uGraph.html#is_consistent_spec"><span class="id" title="lemma">is_consistent_spec</span></a> <span class="id" title="var">global_ext_uctx</span>) (<a class="idref" href="MetaCoq.Common.uGraph.html#is_consistent_spec2"><span class="id" title="lemma">is_consistent_spec2</span></a> <span class="id" title="var">HG'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">reorder</span> : <span class="id" title="keyword">∀</span> <a id="a:158" class="idref" href="#a:158"><span class="id" title="binder">a</span></a> <a id="b:159" class="idref" href="#b:159"><span class="id" title="binder">b</span></a> <a id="c:160" class="idref" href="#c:160"><span class="id" title="binder">c</span></a> : <span class="id" title="keyword">Prop</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a:155"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b:156"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c:157"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a:155"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b:156"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a:155"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c:157"><span class="id" title="variable">c</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">reorder</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ ?; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Common.Universes.html#consistent_extension_on_union"><span class="id" title="lemma">consistent_extension_on_union</span></a>.<br/>
&nbsp;&nbsp;1:{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_wf"><span class="id" title="projection">reference_impl_wf</span></a> <span class="id" title="var">X</span>); <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaCoq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#levels_global_constraint"><span class="id" title="lemma">PCUICUnivSubstitutionConv.levels_global_constraint</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="MetaCoq.Common.Universes.html#CS.union"><span class="id" title="definition">CS.union</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">global_ext_uctx</span><a class="idref" href="MetaCoq.Utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaCoq.Common.uGraph.html#consistent_ext_on_full_ext"><span class="id" title="lemma">consistent_ext_on_full_ext</span></a>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaCoq.Common.uGraph.html#add_uctx_subgraph"><span class="id" title="lemma">add_uctx_subgraph</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#guard_correct"><span class="id" title="method">guard_correct</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Program Global Instance</span> <a id="optimized_abstract_env_prop" class="idref" href="#optimized_abstract_env_prop"><span class="id" title="instance">optimized_abstract_env_prop</span></a> {<a id="cf:161" class="idref" href="#cf:161"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:162" class="idref" href="#guard:162"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :<br/>
&nbsp;&nbsp;@<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_prop"><span class="id" title="class">abstract_env_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_struct"><span class="id" title="instance">optimized_abstract_env_struct</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_exists"><span class="id" title="method">abstract_env_ext_exists</span></a> := <span class="id" title="keyword">fun</span> <a id="adef04e5061ce77a6c2e0f4fa8863238" class="idref" href="#adef04e5061ce77a6c2e0f4fa8863238"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.Utils.MCSquash.html#sq"><span class="id" title="constructor">sq</span></a> <a class="idref" href="MetaCoq.Utils.MCPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env_ext"><span class="id" title="projection">reference_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#adef04e5061ce77a6c2e0f4fa8863238"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Utils.MCPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a><a class="idref" href="MetaCoq.Utils.MCPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a>; |}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">wf_env</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="var">sq</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">wf_env</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">split</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optim_pop"><span class="id" title="definition">optim_pop</span></a>. <span class="id" title="tactic">set</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optim_pop_obligation_1"><span class="id" title="lemma">optim_pop_obligation_1</span></a> <span class="id" title="var">cf</span> <span class="id" title="var">X</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop_decls_correct"><span class="id" title="lemma">reference_pop_decls_correct</span></a> <span class="id" title="var">X</span> <span class="id" title="var">decls</span> <span class="id" title="var">prf</span> <span class="id" title="var">X</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop"><span class="id" title="definition">reference_pop</span></a> <span class="id" title="var">X</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">prf</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> <span class="id" title="var">X</span>); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">prf</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">HΣ</span> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext_wf"><span class="id" title="projection">reference_impl_ext_wf</span></a> <span class="id" title="var">X</span>). <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_lookup_correct"><span class="id" title="method">abstract_env_lookup_correct</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> <span class="id" title="var">X</span> <span class="id" title="var">kn</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.lookup"><span class="id" title="definition">EnvMap.lookup</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="var">erewrite</span> <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.lookup_spec"><span class="id" title="lemma">EnvMap.lookup_spec</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_fresh_globals"><span class="id" title="lemma">wf_fresh_globals</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map_repr"><span class="id" title="projection">wf_env_ext_map_repr</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hl'</span>. <span class="id" title="var">erewrite</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#wf_ext_gc_of_uctx_irr"><span class="id" title="lemma">wf_ext_gc_of_uctx_irr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_leqb_level_n_correct"><span class="id" title="method">abstract_env_leqb_level_n_correct</span></a> <span class="id" title="var">X</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_reference"><span class="id" title="projection">wf_env_ext_reference</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">erewrite</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_level_mem_correct"><span class="id" title="method">abstract_env_level_mem_correct</span></a> <span class="id" title="var">X</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_reference"><span class="id" title="projection">wf_env_ext_reference</span></a>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">erewrite</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_is_consistent_correct"><span class="id" title="method">abstract_env_is_consistent_correct</span></a> <span class="id" title="var">X</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_reference"><span class="id" title="projection">wf_env_reference</span></a>)) <span class="id" title="keyword">with</span> (<span class="id" title="var">udecl</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">t0</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#guard_correct"><span class="id" title="method">guard_correct</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="canonical_abstract_env_impl" class="idref" href="#canonical_abstract_env_impl"><span class="id" title="definition">canonical_abstract_env_impl</span></a> {<a id="cf:164" class="idref" href="#cf:164"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:165" class="idref" href="#guard:165"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_impl"><span class="id" title="definition">abstract_env_impl</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl"><span class="id" title="record">reference_impl</span></a> <a class="idref" href="MetaCoq.Utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_ext"><span class="id" title="record">reference_impl_ext</span></a> <a class="idref" href="MetaCoq.Utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#canonical_abstract_env_struct"><span class="id" title="instance">canonical_abstract_env_struct</span></a> <a class="idref" href="MetaCoq.Utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#canonical_abstract_env_prop"><span class="id" title="instance">canonical_abstract_env_prop</span></a><a class="idref" href="MetaCoq.Utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="optimized_abstract_env_impl" class="idref" href="#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> {<a id="cf:166" class="idref" href="#cf:166"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:167" class="idref" href="#guard:167"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_impl"><span class="id" title="definition">abstract_env_impl</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a><a class="idref" href="MetaCoq.Utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a> <a class="idref" href="MetaCoq.Utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_struct"><span class="id" title="instance">optimized_abstract_env_struct</span></a> <a class="idref" href="MetaCoq.Utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_prop"><span class="id" title="instance">optimized_abstract_env_prop</span></a><a class="idref" href="MetaCoq.Utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="build_wf_env_from_env" class="idref" href="#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> {<a id="cf:168" class="idref" href="#cf:168"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="177e061b1c03e61b795cc8d27a9c6ff0" class="idref" href="#177e061b1c03e61b795cc8d27a9c6ff0"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>) (<a id="53d23792a15d977452907eaf45628bf6" class="idref" href="#53d23792a15d977452907eaf45628bf6"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">PCUICTyping.wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#177e061b1c03e61b795cc8d27a9c6ff0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="61d8ca6b4f012ae507303d45daccf8b5" class="idref" href="#61d8ca6b4f012ae507303d45daccf8b5"><span class="id" title="binder">Σm</span></a> := <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.of_global_env"><span class="id" title="definition">EnvMap.of_global_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#177e061b1c03e61b795cc8d27a9c6ff0"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_reference"><span class="id" title="projection">wf_env_reference</span></a> := {| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_env"><span class="id" title="projection">reference_impl_env</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#177e061b1c03e61b795cc8d27a9c6ff0"><span class="id" title="variable">Σ</span></a>; <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_impl_wf"><span class="id" title="projection">reference_impl_wf</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#53d23792a15d977452907eaf45628bf6"><span class="id" title="variable">wfΣ</span></a> |} ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#61d8ca6b4f012ae507303d45daccf8b5"><span class="id" title="variable">Σm</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map_repr"><span class="id" title="projection">wf_env_map_repr</span></a> := <a class="idref" href="MetaCoq.Common.EnvMap.html#EnvMap.repr_global_env"><span class="id" title="lemma">EnvMap.repr_global_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#177e061b1c03e61b795cc8d27a9c6ff0"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>);<br/>
&nbsp;|}.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
